!function(e){function t(t){for(var o,i,l=t[0],u=t[1],s=t[2],p=0,f=[];p<l.length;p++)i=l[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);for(c&&c(t);f.length;)f.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,l=1;l<n.length;l++){var u=n[l];0!==r[u]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={1:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var c=u;a.push([589,2]),n()}({464:function(e,t,n){},479:function(e,t,n){},482:function(e,t,n){},483:function(e,t,n){},513:function(e,t,n){},514:function(e,t,n){},515:function(e,t,n){},547:function(e,t,n){},548:function(e,t,n){},550:function(e,t,n){},577:function(e,t,n){},585:function(e,t,n){},586:function(e,t,n){},587:function(e,t,n){},588:function(e,t,n){},589:function(e,t,n){"use strict";n.r(t);n(255),n(441),n(445),n(448),n(449);var o=n(1),r=n.n(o),a=n(6),i=n(591),l=n(43),u=n(108),s=n(109),c=n.n(s);var p=function(e){var t=e||{},n=t.skin||"karo-dark",o={skin:n,baseSkin:n,darkSkin:!1,locale:"ru",localeList:["ru","en"],currency:"RUB",timeDiff:108e5,activationDelay:2,app:{name:"xxxxxx"},ui:{},play:{stopOnHide:!0},version:{buildTime:t.buildTime||(new Date).getTime(),revision:t.revision&&t.revision.commit||"dev",tag:t.versionTag||"",value:t.version||"dev"},net:{middlewareUrl:"/Subscriber/services/jsonRequest",openApiUrl:"/Subscriber/openAPI/jsonRequest",requestTimeout:4e4,reloginInterval:36e5},epg:{daysBeforeToday:3,daysAfterToday:7,dayStartShift:0,dayDuration:864e5},cache:{},bsAdverts:{url:"http://mediastage.tv:4444/getRoll",userId:1,showPercent:10,requestTimeout:2e3,advertShowTime:18e5,bigAdvertShowTime:864e5,firstStartShow:!1,playWait:5e3},bsAnalytics:{use:!1,url:"/ClientDataCollectorAPI",middlewareId:null,householdId:0,appName:null,connType:"LAN",minPlayTime:60,sendInterval:6e5},debug:{log:{general:{level:t.debug?"string"==typeof t.debug?t.debug:"debug":"off"},console:{},middleware:{bufferFlushPeriod:1e4,bufferSize:10,messagePartSeparator:" ",sendMessageType:!1}},playerLog:t.playerLog||!1}};return t.mixing&&t.reconfig&&(t.mixing(o,t.reconfig,{overwrite:!0,recursive:!0}),n=o.skin),o.darkSkin=Boolean(n.match(/-dark$/)),o.baseSkin=o.darkSkin?n.substring(0,n.lastIndexOf("-dark")):n,o}({mixing:c.a,skin:"karo-dark",appName:"xxxxxx",debug:!1,playerLog:!1,buildTime:1607808002021,reconfig:null,revision:{commit:"5e135c63"},version:"",versionTag:""});n(232),n(233);var f=n(36),d=n.n(f),y={debug:d.a.DEBUG,info:d.a.INFO,time:d.a.TIME,warn:d.a.WARN,error:d.a.ERROR,off:d.a.OFF};function h(e){return d.a.get(e||"")}var v={head:"HEAD",get:"GET",post:"POST"};function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n=e[t];return"function"==typeof n?n:null}function g(e){var t=e.length;return t>1?e.substr(0,1).toUpperCase()+e.substr(1):t>0?e.toUpperCase():e}var _={_logger:null,getLogger:function(){return this._logger},setLogger:function(e){return this._logger="string"==typeof e?h(e):e,this},useLogger:function(e){return this.getLogger()||this.setLogger(e),this},_loggerName:null,getLoggerName:function(){return this._loggerName},setLoggerName:function(e){return this._loggerName=e,this},getWorkLogger:function(){var e=this.getLoggerName();return this.getLogger()||"string"==typeof e&&h(e)||null},logData:function(e){var t,n=this.getWorkLogger();if(n){"function"!=typeof n[t=e.name.toLowerCase()]&&(t="info");for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];n[t].apply(n,r)}return this},log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.logData.apply(this,[y.info].concat(t))},logDebug:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.logData.apply(this,[y.debug].concat(t))},logError:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.logData.apply(this,[y.error].concat(t))},logInfo:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.logData.apply(this,[y.info].concat(t))},logWarn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.logData.apply(this,[y.warn].concat(t))}};function O(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var P=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&this.changeProperties(t)}var t,n,o;return t=e,(n=[{key:"changeProperties",value:function(e,t){return function(e,t){for(var n,o,r,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=i.exceptMap||{},u=Array.isArray(t)?t:[t],s=u.length,c=0;c<s;)for(a in r=u[c++])l[a]||(a in e?(o=m(e,a))||(e[a]=r[a]):o=m(e,"set".concat(a))||m(e,"set".concat(g(a))),o&&(n="object"===b(n=r[a])&&n&&n.arguments&&Array.isArray(n.arguments)?n.arguments:void 0===n?[]:[n],o.apply(e,n)));return e}(this,e,t)}},{key:"doDispose",value:function(){this.getLogger()&&this.setLogger(null)}}])&&O(t.prototype,n),o&&O(t,o),e}();Object.assign(P.prototype,{_disposed:!1,isDisposed:function(){return this._disposed},doDispose:function(){},dispose:function(){this.isDisposed()||(this.doDispose(),this._disposed=!0)}},_,{doDispose:P.prototype.doDispose});var S=n(106),E=n.n(S);function k(){var e;return(e=this.promise).then.apply(e,arguments)}function R(){var e;return(e=this.promise).catch.apply(e,arguments)}function T(e){var t=Object.assign({method:v.get},e),n=t.url;if(!n)throw new Error("Request URL ('url' field) is not set");var o=t.data,r=t.method,a=t.headerSet||null;t.contentType&&((a||(a={}))["Content-Type"]=t.contentType);var i,l,u=E()(r,n);return a&&u.set(a),t.timeout&&u.timeout(t.timeout),o&&(r===v.get||r===v.head?u.query(o):u.send(o)),i=Object.assign(t,{abort:function(){u.abort()},isTimedout:function(){return u.timedout},promise:u.then()}),(l=i||{}).promise||(l.promise=Promise.resolve()),l.doThen=k,l.doCatch=R,l}var N={SERVICE_UNAVAILABLE:2001,SERVICE_UNAVAILABLE_NO_STORAGE:2002,STORAGE_DEVICE_NOT_AVAILABLE:2003,PLAY_ERROR:2010,INVALID_HTTP_STATUS:2100,INVALID_RESULT:2101,REQUEST_TIMEOUT:2103,ERROR_RESULT:2104,FAILED_TRY:2105,CONNECTION_ERROR:2106,DATA_NOT_LOADED:2201,CHANNEL_PACKAGES_NOT_LOADED:2202,SVOD_PACKAGES_NOT_LOADED:2203,NO_CONTENT_SOURCE:2204,BANK_PAY_IMPOSSIBLE:2700,BANK_PAY_REJECTED:2701,NO_STREAM:2800,NO_NETWORK:2802,CONTENT_NOT_FOUND:2803,FATAL_ERROR:1,NO_SESSION:2,CONNECTION_LOST:100,INVALID_LOGIN_DATA:101,INACTIVE_HOUSEHOLD:102,UNKNOWN_HOUSEHOLD:103,MAC_ALREADY_USED:105,MAC_ADDRESS_NOT_FOUND:106,NO_SERVICE_FOR_HOUSEHOLD:107,MAXIMUM_TERMINALS_PER_HOUSEHOLD:108,INACTIVE_TERMINAL:109,INACTIVE_MAIN_MEMBER:110,UNSUPPORTED_TERMINAL:111,SERVICE_UNAVAILABLE_IN_REGION:113,WRONG_COST:200,NOT_ENOUGH_MONEY:201,BILLING_ERROR:203,WRONG_SPENDING_LIMIT:204,TRANSACTION_ERROR:299,WRONG_ACTION:300,WRONG_MAC_ADDRESS_FORMAT:301,WRONG_PINCODE_FORMAT:302,WRONG_USERNAME_FORMAT:303,MISSED_MANDATORY_PARAMETERS:304,UNKNOWN_CONTENT_RATING:305,WRONG_PHONE_FORMAT:308,WRONG_AMOUNT:309,WRONG_FIELD_FORMAT:399,TERMINAL_NOT_FOUND:400,ASSET_NOT_FOUND:401,VOD_CATEGORY_NOT_FOUND:402,TARIFF_NOT_FOUND:403,PROGRAM_NOT_FOUND:404,BROADCAST_SOURCE_NOT_FOUND:405,SERVICE_NOT_FOUND:406,MEMBER_NOT_FOUND:407,CHANNEL_PACKAGE_NOT_FOUND:408,SERVICE_GROUP_NOT_FOUND:409,RENTAL_PERIOD_NOT_FOUND:410,PARENTAL_RATING_NOT_FOUND:411,PREPARED_ORDER_NOT_FOUND:412,CHANNEL_NOT_FOUND:413,TERMINAL_TYPE_NOT_FOUND:414,TARIFF_PLAN_NOT_FOUND:415,BANNER_NOT_FOUND:416,MEGAFON_USER_NOT_FOUND:417,HOUSEHOLD_NOT_FOUND:418,REGION_NOT_FOUND:419,DISCOUNT_NOT_FOUND:420,RENTAL_PRICE_NOT_FOUND:422,PLUGIN_NOT_FOUND:424,ENTITY_NOT_FOUND:499,PARENTAL_RATING_LIMIT:500,PROGRAM_ORDERING_LIMIT:501,SERVICE_ORDERING_LIMIT:502,EDIT_MEMBER_LIMIT:503,ORDER_ROLLBACK_LIMIT:504,ASSET_MEDIA_ENCODING_NOT_FOUND:505,PROGRAM_STARTED:510,PROGRAM_NOT_STARTED:511,ANOTHER_MEMBER_ORDER:512,SUBSCRIPTION_BLOCKED:513,UNSUBSCRIPTION_BLOCKED:514,PIN_ALREADY_REGISTERED:600,USERNAME_ALREADY_REGISTERED:601,SERVICE_ALREADY_SUBSCRIBED:602,HOUSEHOLD_NAME_ALREADY_REGISTERED:603,ORDER_ALREADY_EXECUTED:604,VOD_ALREADY_PURCHASED:604,CONTENT_PROTECTION_PLUGIN_ERROR:801,INFO_SERVICE_WITHOUT_PLUGIN:802,INFORMATION_PLUGIN_NOT_FOUND:803,BILLING_PLUGIN_NOT_FOUND:804,UNSUPPORTED_FUNCTION:805,UNKNOWN_BOOKING_ERROR:1e4,BOOKING_NOT_FOUND:10001,BOOKING_IS_NOT_PAID:10002,BOOKING_IS_OVERDUE:10003,BOOKING_PROBLEM:10004,BILLING_SYSTEM_ERROR:1001,BILLING_OPERATION_ERROR:1002,BILLING_AUTHENTICATION_FAILED:1003,BILLING_UNSUPPORTED_OPERATION:1004,BILLING_TOO_LITTLE_MONEY:1005,BILLING_PENDING_TRANSACTION:1006,BILLING_TOO_MANY_DEVICES:1007,BILLING_UNABLE_DELETE_BASE_PACKAGE:1008,BILLING_PASSWORD_EXPIRED:1009,BILLING_MAX_LOGIN_ATTEMPTS:1010,BILLING_ACCOUNT_BLOCKED:1011,NETBYNET_BILLING_ERROR:1101,MOBIMONEY_ERROR:1201},w=N;function D(e){return"number"==typeof e?e:e.code}function C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var A=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t,this.message=n||o&&o.message||"",this.originalError=o||null}var t,n,o;return t=e,(n=[{key:"toString",value:function(){var e="Error: code - ".concat(this.code);return this.message&&(e+="; message - ".concat(this.message)),this.error&&(e+="; original error - ".concat(this.error)),e}}])&&C(t.prototype,n),o&&C(t,o),e}();function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function M(e,t,n){return(M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(i,e);var t,n,o,r,a=(t=i,function(){var e,n=B(t);if(V()){var o=B(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return U(this,e)});function i(){return L(this,i),a.apply(this,arguments)}return n=i,(o=[{key:"getRequestUrl",value:function(){return this._requestUrl}},{key:"setRequestUrl",value:function(e){return this._requestUrl=e,this}},{key:"getRequestMethod",value:function(){return this._requestMethod}},{key:"setRequestMethod",value:function(e){return this._requestMethod=e,this}},{key:"getContentType",value:function(){return this._contentType}},{key:"setContentType",value:function(e){return this._contentType=e,this}},{key:"getHeaderSet",value:function(){return this._headerSet}},{key:"setHeaderSet",value:function(e){return this._headerSet=e,this}},{key:"getRequestTimeout",value:function(){return this._requestTimeout}},{key:"setRequestTimeout",value:function(e){return this._requestTimeout=e,this}},{key:"getRequestResultAction",value:function(){return this._requestResultAction}},{key:"setRequestResultAction",value:function(e){return this._requestResultAction=e,this}},{key:"getRequestErrorAction",value:function(){return this._requestErrorAction}},{key:"setRequestErrorAction",value:function(e){return this._requestErrorAction=e,this}},{key:"setResponseAction",value:function(e){return this.setRequestResultAction(e).setRequestErrorAction(e)}},{key:"prepareRequestData",value:function(e,t){return e}},{key:"getRequestResultFromResponse",value:function(e,t,n){return null}},{key:"_handleRequestResult",value:function(e,t,n){var o=e.error||null;o&&(o=new A(w.INVALID_HTTP_STATUS,null,o));var r={error:o,request:t,response:e,result:e.body||e.text,settings:n};"context"in t&&(r.context=t.context),(r=Object.assign(r,this.getRequestResultFromResponse(e,t,r))).initialResult=r.result;var a=this.getRequestResultAction();return"function"==typeof a&&a(r.result,r),r}},{key:"getRequestResultFromError",value:function(e,t,n){return null}},{key:"_handleRequestError",value:function(e,t,n){var o,r=null;"response"in e?r=e.response:"rawResponse"in e&&(r={text:e.rawResponse}),e.crossDomain?o=new A(w.CONNECTION_ERROR,null,e.original):e.parse?o=new A(w.INVALID_RESULT,null,e.original):e.timeout||t.isTimedout()?o=new A(w.REQUEST_TIMEOUT,null,e.original):r&&!r.ok&&(o=new A(w.INVALID_HTTP_STATUS,null,e.original));var a={error:o,request:t,response:r,result:null,settings:n};"context"in t&&(a.context=t.context),(a=Object.assign(a,this.getRequestResultFromError(e,t,a))).initialResult=a.result;var i=this.getRequestErrorAction();return"function"==typeof i&&i(a.error,a),a}},{key:"_processRequestResult",value:function(e,t){var n=t.errorHandler,o=t.handler,r=t.resultHandler;return e.error?"function"==typeof n&&n(e):"function"==typeof r&&r(e),"function"==typeof o&&o(e),e}},{key:"sendRequest",value:function(e,t){var n=this,o={},r=this.prepareRequestData(e,t);if(r&&(o.data=r),Object.assign(o,{contentType:this.getContentType(),headerSet:this.getHeaderSet(),method:this.getRequestMethod(),timeout:this.getRequestTimeout(),url:this.getRequestUrl()},t),!o.url)throw new Error("Request URL is not set");var a=T(o);return a.promise=a.promise.then((function(e){return n._handleRequestResult(e,a,t)})).catch((function(e){return n._handleRequestError(e,a,t)})),(o.errorHandler||o.handler||o.resultHandler)&&(a.promise=a.promise.then((function(e){return n._processRequestResult(e,a)}))),a}},{key:"doDispose",value:function(){M(B(i.prototype),"doDispose",this).call(this),this._headerSet=null,this._requestResultAction=null,this._requestErrorAction=null}}])&&I(n.prototype,o),r&&I(n,r),i}(P);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}F.prototype._contentType="application/json",F.prototype._headerSet=null,F.prototype._requestMethod=v.get,F.prototype._requestResultAction=null,F.prototype._requestErrorAction=null,F.prototype._requestTimeout=p.net.requestTimeout,F.prototype._requestUrl="";var G={_contentType:"application/x-www-form-urlencoded",getRequestResultFromResponse:function(e,t,n){var o=null,r=n.result;return r&&"object"===q(r)&&(o=r.errorCode?{error:new A(r.errorCode,"string"==typeof r.result?r.result:""),result:null}:{result:r.result}),o}};function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(i,e);var t,n,o,r,a=(t=i,function(){var e,n=J(t);if(z()){var o=J(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return X(this,e)});function i(){return K(this,i),a.apply(this,arguments)}return n=i,(o=[{key:"getAction",value:function(){return this._action}},{key:"setAction",value:function(e){return this._action=e,this}},{key:"prepareRequestData",value:function(e,t){var n=this.getAction();return n?e?"object"===H(e)?Object.assign({action:n},e):"action=".concat(n,"&").concat(e):{action:n}:e}}])&&W(n.prototype,o),r&&W(n,r),i}(F);Object.assign(Q.prototype,G),Q.prototype._action="",Q.prototype._requestMethod=v.post,Q.prototype._requestUrl=p.net.middlewareUrl;var $="writeLog";function Z(e){return function(e){if(Array.isArray(e))return ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ee(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var te="",ne=0,oe=null,re=function(e,t){return function(e,t,n,o){if(!(e||t&&t.action))throw new Error("Middleware action is not set in parameters");return new Q(o).setAction(e).sendRequest(t,n)}($,e,t)},ae=10,ie=1e4,le=" ",ue=!1;function se(e){var t,n={text:te};if(e){switch(e){case y.error:t=3;break;case y.warn:t=2;break;default:t=1}n.level=t}re(n),te="",ne=0,oe=null}var ce,pe=h,fe=[{config:{level:y.off},handler:d.a.createDefaultHandler(),name:"console"},{config:{level:y.off},configure:function(e){var t="bufferSize"in e;"bufferFlushPeriod"in e&&(ie=e.bufferFlushPeriod),(t||"sendMessageType"in e)&&(t&&(ae=e.bufferSize),ue=Boolean(ae<2&&e.sendMessageType)),"function"==typeof e.logSender&&(re=e.logSender),"messagePartSeparator"in e&&(le=e.messagePartSeparator)},handler:function(e,t){var n,o=t.level,r=t.name,a=[],i=null;switch(oe&&clearTimeout(oe),(n=a).push.apply(n,Z(e)),a="".concat(a.join(le),"\n"),o){case y.info:i="[Info]: ";break;case y.error:i="[Error]: ";break;case y.warn:i="[Warn]: "}i&&(a="".concat(i).concat(a)),r&&(a="[".concat(r,"] ").concat(a)),te+=a,++ne>=ae?se(ue?o:null):ie>-1&&(oe=setTimeout(se,ie))},name:"middleware"}];function de(e){!function(e){d.a.setLevel(e)}(e.value===y.off.value?e:y.debug)}function ye(e){var t,n,o,r,a,i,l=e["*"];for(r=0,i=fe.length;r<i;r++)o=(t=fe[r]).name,(l||o in e)&&("string"==typeof(a=(n=Object.assign(t.config,l,e[o])).level)&&(n.level=a=y[n.level]||y.off),"function"==typeof t.configure&&t.configure(n),a!==y.off&&de(a))}function he(e){de(e),ye({"*":{level:e}})}function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _e(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}ce=function(e,t){var n,o,r;for(o=0,r=fe.length;o<r;o++)n=fe[o],t.level.value>=n.config.level.value&&n.handler(e,t)},d.a.setHandler(ce),he(y.off);var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(i,e);var t,n,o,r,a=(t=i,function(){var e,n=Pe(t);if(Oe()){var o=Pe(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return _e(this,e)});function i(){return be(this,i),a.apply(this,arguments)}return n=i,r=[{key:"getRequestUrl",value:function(){return i._requestUrl}},{key:"useAllDataSource",value:function(){i._requestUrl=p.net.middlewareUrl}},{key:"useOpenDataSource",value:function(){i._requestUrl=p.net.openApiUrl}}],(o=[{key:"getRequestUrl",value:function(){return this._requestUrl||i._requestUrl}}])&&me(n.prototype,o),r&&me(n,r),i}(Q);Se._requestUrl=p.net.openApiUrl,Se.prototype._requestUrl="";var Ee=pe("service/bsAnalytics"),ke="getBsAnalyticsProperties";var Re=n(159),Te=n.n(Re),Ne="bookingData",we="booking",De=Te.a;function Ce(e){return Te.a.namespace(e)}var Ae=n(2),je=n.n(Ae),Le=n(3),Ie=n.n(Le),Me=n(21),xe=n(12),Ue=n(111);function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e,t){return!t||"object"!==Ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function He(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}i.b.defaultProps.getText=function(e,t){return this.formatMessage("string"==typeof e?{id:e,defaultMessage:e}:e,t)};var We={},Ye=Object(xe.c)(),Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(u,e);var t,n,o,a,l=(t=u,function(){var e,n=Ke(t);if(He()){var o=Ke(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return Ge(this,e)});function u(){return Be(this,u),l.apply(this,arguments)}return n=u,a=[{key:"injectIntl",value:function(e){return Object(Ue.c)(e)}},{key:"getLocaleMessageSet",value:function(e){var t=e.intl||{},n=e.messages;if(!n&&e.localePack){var o=e.locale||t.locale;o&&(n=e.localePack[o])}return n||t.messages}},{key:"getLocaleMessages",value:function(e){return this.getLocaleMessageSet(e)||We}},{key:"getIntl",value:function(e){var t=!e.locale&&e.intl&&e.intl.locale?Object.assign({locale:e.intl.locale},e):e;return Object(i.a)(t.messages?t:Object.assign({messages:this.getLocaleMessages(t)},t),Ye)}},{key:"text",value:function(e){var t=this.getIntl(e);return t.getText.bind(t)}},{key:"textBy",value:function(e,t){return this.text(Object.assign({localePack:e},t))}},{key:"getText",value:function(e,t,n,o){return this.getIntl(Object.assign({localePack:e},t)).getText(n,o)}},{key:"formatDate",value:function(e,t,n){return(e.intl||this.getIntl(e)).formatDate("number"==typeof t?t:t.getTime(),n)}},{key:"formatTime",value:function(e,t,n){var o=(e.intl||this.getIntl(e)).formatTime("number"==typeof t?t:t.getTime(),n);return o&&n&&"2-digit"===n.hour&&!o.match(/^\u200e?\d\d/)&&(o="0".concat(o.match(/\d.+/)[0])),o}}],(o=[{key:"getIntl",value:function(){return u.getIntl(this.props)}},{key:"getText",value:function(){var e=this.getIntl();return"function"==typeof e.getText?e.getText.apply(e,arguments):""}},{key:"getLocaleMessages",value:function(){return u.getLocaleMessages(this.props)}},{key:"getContent",value:function(e){var t=this.props,n=Object.assign({},t);return!n.locale&&e&&e.locale&&(n.locale=e.locale),!n.messages&&n.localePack&&(n.messages=u.getLocaleMessages(n)),delete n.localePack,r.a.createElement(i.b,n,this.props.children)}},{key:"render",value:function(){var e=this;return this.props.locale?this.getContent():r.a.createElement(Ue.a.Consumer,null,(function(t){return e.getContent(t)}))}}])&&Fe(n.prototype,o),a&&Fe(n,a),u}(o.PureComponent);Xe.displayName="LocaleProvider",Xe.propTypes={children:Ie.a.element.isRequired,locale:Ie.a.string,localePack:Ie.a.object,messages:Ie.a.object};var ze=n(112),Je=n.n(ze),Qe=n(107),$e=n.n(Qe),Ze=Ce("karo");function et(){Ze.remove(Ne)}function tt(e){var t;Je()(e)&&e.length&&(t=e,Ze.set(we,t))}function nt(e){var t;$e()(e)&&e.endVal&&(t=e,Ze.set(Ne,t))}n(464);var ot,rt,at=n(24);function it(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",o=e[n];for(t in e)t!==n&&(e[t]=Object.assign({},o,e[t]));return e}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var st=it({en:(lt(ot={},"error-".concat(w.ASSET_NOT_FOUND),"No content found. Contact tech support"),lt(ot,"error-".concat(w.UNKNOWN_BOOKING_ERROR),"Unknown error. Contact tech support"),lt(ot,"error-".concat(w.BOOKING_NOT_FOUND),"No reservation found. Check the correctness of the input or contact technical support"),lt(ot,"error-".concat(w.BOOKING_IS_NOT_PAID),"The reservation is not paid. Contact tech support"),lt(ot,"error-".concat(w.BOOKING_IS_OVERDUE),"Your reservation has expired"),lt(ot,"error-".concat(w.BOOKING_PROBLEM),"Problems with the reservation. Contact tech support"),lt(ot,"error-code-validation","Make sure you enter only latin letters and numbers. "),lt(ot,"error-general-title","Undefined error"),lt(ot,"error-general-text","Something went wrong, but we are already working on it. Please check your internet connection or refresh browser page."),lt(ot,"success-code-activation","Done! Code activated."),ot),ru:(ut(rt={},"error-".concat(w.ASSET_NOT_FOUND),"Контент не найден. Обратитесь в тех. поддержку"),ut(rt,"error-".concat(w.UNKNOWN_BOOKING_ERROR),"Неизвестная ошибка. Обратитесь в тех. поддержку"),ut(rt,"error-".concat(w.BOOKING_NOT_FOUND),"Бронь не найдена. Проверьте корректность ввода или обратитесь в тех. поддержку"),ut(rt,"error-".concat(w.BOOKING_IS_NOT_PAID),"Бронь не оплачена. Обратитесь в тех. поддержку"),ut(rt,"error-".concat(w.BOOKING_IS_OVERDUE),"Срок действия брони истек"),ut(rt,"error-".concat(w.BOOKING_PROBLEM),"Проблемы с бронью. Обратитесь в тех. поддержку"),ut(rt,"error-code-validation","Убедитесь, что Вы ввели только буквы латинского алфавита и цифры. "),ut(rt,"error-general-title","Ошибка"),ut(rt,"error-general-text","Что-то пошло не так, но мы уже работаем над этим. Проверьте, есть ли интернет или обновите страницу."),ut(rt,"success-code-activation","Готово! Код активирован."),rt)}),ct=[w.ASSET_NOT_FOUND,w.UNKNOWN_BOOKING_ERROR,w.BOOKING_NOT_FOUND,w.BOOKING_IS_NOT_PAID,w.BOOKING_IS_OVERDUE,w.BOOKING_PROBLEM];var pt=pe("ui/activation-form/model"),ft={booking:null,error:null,loading:!1,overdue:!1,bookingData:null,success:!1},dt=Object(at.b)({name:"activation-form",initialState:ft,reducers:{codeVerificationAttempt:function(e){e.loading=!0},codeVerificationFailure:function(e,t){e.error=t.payload},codeVerificationFailureOverdue:function(e){e.overdue=!0},codeVerificationSuccess:function(e){e.success=!0},setVerificationResult:function(e,t){e.booking=t.payload.code,e.bookingData=t.payload.result},resetVerification:function(e){e.bookingData=null,e.loading=!1,e.error=null,e.success=!1,e.overdue=!1}}}),yt=dt.actions,ht=yt.codeVerificationAttempt,vt=yt.codeVerificationSuccess,bt=yt.codeVerificationFailure,mt=(yt.codeVerificationFailureOverdue,yt.setVerificationResult),gt=yt.resetVerification,_t=dt.reducer;function Ot(e,t){return console.log("Creating mocked response..."),(n={code:e},new Promise((function(e,t){var o={error:w.UNKNOWN_BOOKING_ERROR},r=n.code;console.log(r),"11111"===r?e({error:{code:w.ASSET_NOT_FOUND}}):"22222"===r?e({error:{code:w.BOOKING_IS_NOT_PAID}}):"33333"===r?e({error:{code:w.BOOKING_IS_OVERDUE}}):"44444"===r?e({error:{code:w.BOOKING_PROBLEM}}):"55555"===r?e({error:{code:w.BOOKING_NOT_FOUND}}):"66666"===r&&e({result:{url:"result"}}),e(o)}))).then((function(n){console.log(n);var o=n.error,r=n.result;if(t(gt()),o){var a=new A(o.code,o.message,o.originalError);return pt.error("An error occurred during code verification.",a),t(bt(function(e){var t=Xe.textBy(st,{locale:p.locale}),n=D(e);return n&&ct.includes(n)?t("error-".concat(n)):e.message||t("error-general-text")}(a))),null}return pt.info("Code verification success.",r),t(vt()),{code:e,result:r}})).catch((function(e){return pt.error("An error occurred during code verification request.",e),t(bt()),null}));var n}var Pt=n(44),St=n.n(Pt);function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tt(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?Nt(e):t}function Nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ct(){return St.a.fullscreenEnabled}function At(){return St.a.fullscreenElement}var jt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(u,e);var t,n,o,i,l=(t=u,function(){var e,n=Dt(t);if(wt()){var o=Dt(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return Tt(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e))._handleFullscreenChange=t._handleFullscreenChange.bind(Nt(t)),t._handleFullscreenError=t._handleFullscreenError.bind(Nt(t)),t}return n=u,(o=[{key:"componentDidMount",value:function(){Ct()&&(St.a.addEventListener("fullscreenchange",this._handleFullscreenChange,!1),St.a.addEventListener("fullscreenerror",this._handleFullscreenError,!1),this._setMode())}},{key:"componentDidUpdate",value:function(e){var t=this.props;!Ct()||t.active===e.active&&this._content===this._prevContent||this._setMode()}},{key:"componentWillUnmount",value:function(){Ct()&&(St.a.removeEventListener("fullscreenchange",this._handleFullscreenChange,!1),St.a.removeEventListener("fullscreenerror",this._handleFullscreenError,!1))}},{key:"_handleChange",value:function(e){var t=this.props.onChange;"function"==typeof t&&t(e)}},{key:"_handleFullscreenChange",value:function(e){e.stopPropagation();var t=Boolean(St.a.fullscreenElement);t!==this.props.active&&this._handleChange(t)}},{key:"_handleFullscreenError",value:function(e){e.stopPropagation(),this._handleChange(!1)}},{key:"_setMode",value:function(){var e=this._content;e&&this.props.active?St.a.requestFullscreen(Object(a.findDOMNode)(e)):At()&&St.a.exitFullscreen()}},{key:"render",value:function(){var e,t=this,n=this.props.children;if(Ct()){var o=r.a.Children.only(n);e=r.a.cloneElement(o,{ref:function(e){e?t._content=e:(t._prevContent=t._content,t._content=null);var n=o.ref;if(n){var r=Et(n);"function"===r?n(e):"object"===r&&(n.current=e)}}})}else e=n,this._content=this._prevContent=null;return e}}])&&kt(n.prototype,o),i&&kt(n,i),u}(o.PureComponent);function Lt(){return(Lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){xt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ut(e){var t=e.location,n=e.to;return delete Object.assign({},e).location,r.a.createElement(Me.a,Lt({},e,{to:"string"==typeof n?Mt({},t,{pathname:n}):n}))}jt.isEnabled=Ct,jt.isOn=At,jt.propTypes={children:Ie.a.element.isRequired,active:Ie.a.bool,onChange:Ie.a.func},jt.defaultProps={active:!1},Ut.propTypes={to:Ie.a.oneOfType([Ie.a.object,Ie.a.string]).isRequired,location:Ie.a.object};var Vt=Object(Me.g)(Ut),Bt=it({en:{title:"To watch a movie, enter the reservation code from karofilm.ru",description:"After activating the code, the movie is available for watching within 24 hours",activate:"Activate"},ru:{title:"Чтобы смотреть фильм, введите код бронирования с сайта xxxxxx.ru",description:"После активации кода фильм доступен для просмотра в течение 24 часов.",activate:"Активировать"}}),Ft=n(235),qt=n.n(Ft),Gt=n(236),Ht=n.n(Gt),Kt=n(237),Wt=n.n(Kt),Yt=n(238),Xt=n.n(Yt);var zt={bookingIsOverdue:!1},Jt=Object(at.b)({name:"app",initialState:zt,reducers:{bookingOverdue:function(e){e.bookingIsOverdue=!0},resetBookingOverdue:function(e){e.bookingIsOverdue=!1}}}),Qt=Jt.actions,$t=Qt.bookingOverdue,Zt=Qt.resetBookingOverdue,en=Jt.reducer,tn=n(35),nn=function(e){return e.activation||ft},on=Object(tn.a)(nn,(function(e){return{booking:e.booking,loading:e.loading,error:e.error,success:e.success,overdue:e.overdue}})),rn=Object(tn.a)((function(e){return e.app||zt}),(function(e){return e.bookingIsOverdue})),an=Object(tn.a)(nn,(function(e){return e.bookingData}));n(479);function ln(e){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function un(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function sn(e,t){return(sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cn(e,t){return!t||"object"!==ln(t)&&"function"!=typeof t?pn(e):t}function pn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function dn(e){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)}(u,e);var t,n,a,i,l=(t=u,function(){var e,n=dn(t);if(fn()){var o=dn(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return cn(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).lastBookingIsInvalid=!!t.props.booking&&t.validationRule.test(t.props.booking),t.state={code:t.props.booking||"",submitDisabled:t.lastBookingIsInvalid,showOverdueError:t.props.bookingIsOverdue,validationError:t.lastBookingIsInvalid},t.handleSubmit=t.handleSubmit.bind(pn(t)),t.handleCodeClean=t.handleCodeClean.bind(pn(t)),t.handleChangeInputField=t.handleChangeInputField.bind(pn(t)),t.handleEnterKeyDown=t.handleEnterKeyDown.bind(pn(t)),t.handleSubmitThrottled=qt()(t.handleSubmit,t.submitThrottleDelay),t.codeInputRef=Object(o.createRef)(),t.codeSubmitButtonRef=Object(o.createRef)(),t}return n=u,(a=[{key:"componentDidMount",value:function(){this.codeInputRef.current&&this.codeInputRef.current.focus(),this.props.onResetForm()}},{key:"componentDidUpdate",value:function(e,t){var n=this.state;t.code!==n.code&&this.handleCodeChange(),this.codeInputRef.current&&this.codeInputRef.current.focus()}},{key:"handleCodeClean",value:function(){this.setState({code:"",submitDisabled:!0,validationError:!1})}},{key:"handleCodeChange",value:function(){var e=this.props,t=e.onResetBookingOverdue,n=e.onResetForm,o=this.state.code,r=o.length,a=this.validationRule.test(o);this.setState({submitDisabled:Boolean(r<this.minLengthToTextField||a),showOverdueError:!1,validationError:a}),t(),n()}},{key:"handleChangeInputField",value:function(){this.codeInputRef.current&&this.setState({code:this.codeInputRef.current.value})}},{key:"handleSubmit",value:function(e){var t=this.props,n=t.onFormSubmit,o=t.onResetBookingOverdue,r=this.state,a=r.code,i=r.validationError,l=a.toUpperCase();e.stopPropagation(),e.preventDefault(),i||(this.setState({showOverdueError:!1}),o(),n(l),this.codeSubmitButtonRef.current.blur(),tt(l))}},{key:"handleEnterKeyDown",value:function(e){var t=this.state,n=this.props;"Enter"===e.key&&(!t.code||t.submitDisabled||n.success||n.loading?(e.stopPropagation(),e.preventDefault()):this.handleSubmitThrottled(e))}},{key:"render",value:function(){var e,t,n,o=this.props,a=o.loading,i=o.error,l=o.overdue,u=o.success,s=this.state,c=s.code,p=s.validationError,f=s.submitDisabled,d=s.showOverdueError,y=Xe.textBy(Bt,this.props),h=Xe.textBy(st,this.props),v=Boolean(l||d),b=Boolean(i||v||u||p);return r.a.createElement("form",{className:"vp-activation-form",onSubmit:this.handleSubmit},r.a.createElement(Xt.a,{className:"vp-activation-form__title",component:"h2",primaryText:y("title")}),r.a.createElement("div",{className:"vp-activation-form__text-input-box"},r.a.createElement("input",{ref:this.codeInputRef,id:"code-input-field",name:"code-input-field",className:je()("vp-activation-form__text-input",{"vp-activation-form__text-input_error":(i||p)&&!a,"vp-activation-form__text-input_overdue":v&&!a,"vp-activation-form__text-input_success":u&&!a}),type:"text",maxLength:"20",value:c,onKeyDown:this.handleEnterKeyDown,onChange:this.handleChangeInputField,disabled:a||u}),a&&r.a.createElement(Ht.a,{className:"vp-activation-form__spinner",id:"code-activation-spinner",centered:!1}),!a&&c.length>0&&r.a.createElement("button",{type:"button",onClick:this.handleCodeClean,disabled:u,className:je()("vp-activation-form__result",{"vp-activation-form__clean":!i&&!u&&!v,"vp-activation-form__error":i||v||p,"vp-activation-form__success":u})},r.a.createElement("div",{className:je()({"vp-activation-form__cross":!u,"vp-activation-form__tick":u})}))),r.a.createElement(Wt.a,{collapsed:!b||a},r.a.createElement("span",{className:je()("vp-activation-form__hint",{"vp-activation-form__hint_error":i||p,"vp-activation-form__hint_overdue":v,"vp-activation-form__hint_success":u,"vp-hidden":!(i||u||v||p)})},b&&(e=p&&h("error-code-validation"),t=v&&h("error-".concat(w.BOOKING_IS_OVERDUE)),n=u&&h("success-code-activation"),i||e||t||n))),r.a.createElement("button",{ref:this.codeSubmitButtonRef,className:"vp-activation-form__text-input-submit-button",type:"submit",disabled:f||a||u},y("activate")),r.a.createElement("p",{className:"vp-activation-form__description"},y("description")))}}])&&un(n.prototype,a),i&&un(n,i),u}(o.PureComponent);yn.prototype.minLengthToTextField=1,yn.prototype.submitThrottleDelay=300,yn.prototype.validationRule=/[^A-Za-z0-9]/,yn.propTypes={bookingIsOverdue:Le.bool.isRequired,loading:Le.bool.isRequired,overdue:Le.bool.isRequired,success:Le.bool.isRequired,onFormSubmit:Le.func.isRequired,onResetBookingOverdue:Le.func.isRequired,onResetForm:Le.func.isRequired,booking:Le.string,error:Le.oneOfType([Le.string,Le.oneOf([null])])};var hn=Object(l.b)((function(e){var t=on(e);return{loading:t.loading,error:t.error,overdue:t.overdue,success:t.success,booking:t.booking,bookingIsOverdue:rn(e)}}),(function(e){return{onResetForm:function(){e(gt())},onFormSubmit:function(t){e(ht()),setTimeout((function(){Ot(t,e).then((function(t){t&&setTimeout((function(){e(mt(t))}),1e3*p.activationDelay)}))}),800)},onResetBookingOverdue:function(){e(Zt())}}}))(Xe.injectIntl(yn));function vn(e){return"".concat(function(e){return p.darkSkin&&"no-program-image.svg"===e?"image/dark/":"image/base/"}(e)).concat(e)}var bn=n(239),mn=n.n(bn);function gn(){return(gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function _n(e){var t=e.src||"";!t&&e.file&&(t=vn(e.file));var n=Object.assign({},e);return delete n.file,delete n.src,r.a.createElement(mn.a,gn({alt:e.alt||""},n,{src:t,className:je()(_n.addedClassName,e.className)}))}function On(e,t,n){return!e.file&&!e.src&&new Error('Non-empty value either for the property "file" or the property "src" should be set to "'.concat(n,'".'))}_n.addedClassName="vp-avatar",_n.propTypes={alt:Ie.a.string,className:Ie.a.string,file:On,src:On};var Pn=_n;n(482);function Sn(e){var t=e.children,n=p.app;return r.a.createElement("div",{className:"vp-header"},r.a.createElement(Pn,{className:"vp-header__logo",alt:n.name,src:vn("logo.svg")}),t&&r.a.createElement("div",{className:"vp-header__container"},t))}Sn.propTypes={children:Le.element},Sn.defaultProps={children:null};var En=Sn;n(483);function kn(){return r.a.createElement(Xe,{localePack:Bt},r.a.createElement(o.Fragment,null,r.a.createElement(En,null),r.a.createElement("div",{className:"vp-home"},r.a.createElement(hn,null))))}var Rn=n(156),Tn=n.n(Rn),Nn=n(88),wn=n.n(Nn),Dn=n(240),Cn=n.n(Dn),An=pe("ui/app/model");function jn(e){var t=e.endVal,n=Tn()();if(!wn()(t)||0!==t&&t<n){var o=Cn()(n-t),r=o.days,a=o.hours,i=o.minutes;return An.error("Current booking has become overdue [".concat(r,"d ").concat(a,"h ").concat(i,"m] ago!")),!0}return!1}var Ln={stop:0,play:1,pause:2,end:5,error:9},In=function(e){return e.player},Mn=Object(tn.a)(In,(function(e){return e.playState===Ln.pause})),xn=Object(tn.a)(In,(function(e){return e.playState===Ln.play})),Un=Object(tn.a)(In,(function(e){return e.playState===Ln.end})),Vn=Object(tn.a)(In,(function(e){return e.playState===Ln.error})),Bn=Object(tn.a)(In,(function(e){return e.playState===Ln.stop})),Fn=Object(tn.a)(In,(function(e){return e.volumeData.volume})),qn=Object(tn.a)(In,(function(e){return e.activeSubtitles})),Gn=Object(tn.a)(In,(function(e){return e.activeAudio})),Hn=Object(tn.a)(In,(function(e){return{availableSubtitles:e.availableSubtitles,availableAudio:e.availableAudio}})),Kn=n(241),Wn=n.n(Kn),Yn=pe("ui/player/model"),Xn={usual:1,wide:2,full:3};function zn(e){return{volume:e>0?e:0,value:e,mute:e<0}}function Jn(e){return e===Xn.full}function Qn(e){return e===Xn.wide}var $n={volumeData:zn(50),viewMode:Xn.usual,playState:Ln.stop,activeAudio:null,availableAudio:null,activeSubtitles:null,availableSubtitles:null},Zn=Object(at.b)({name:"player",initialState:$n,reducers:{mute:function(e){e.volumeData.volume>0?e.volumeData.volume=-e.volumeData.volume:0===e.volumeData.volume&&(e.volumeData.volume=-1)},unmute:function(e){e.volumeData.volume<0?e.volumeData.volume=-e.volumeData.volume:0===e.volumeData.volume&&(e.volumeData.volume=1)},setVolume:function(e,t){e.volumeData.volume=t.payload},setPlayState:function(e,t){e.playState=t.payload},setViewMode:function(e,t){e.viewMode=t.payload||Xn.usual},removeAdditionalData:function(e){e.activeAudio=$n.activeAudio,e.activeSubtitles=$n.activeSubtitles,e.availableAudio=$n.availableAudio,e.availableSubtitles=$n.availableSubtitles},setAdditionalData:function(e,t){var n=t.payload,o=n.audioList,r=n.subtitleList;if(o&&(e.availableAudio=t.payload,e.activeAudio)){var a=Wn()(e.availableAudio.audioList,e.activeAudio);e.activeAudio=a||$n.activeAudio}r&&(e.availableSubtitles=t.payload)},setSubtitles:function(e,t){t.payload?(e.activeSubtitles=t.payload,Yn.info("Subtitles lang: [".concat(t.payload.lang,"] name: [").concat(t.payload.name,"] enabled"))):e.activeSubtitles=null},setAudio:function(e,t){t.payload?(e.activeAudio=t.payload,Yn.info("Audio lang: [".concat(t.payload.lang,"] name: [").concat(t.payload.name,"] enabled"))):e.activeAudio=null}}}),eo=Zn.actions,to=eo.mute,no=eo.unmute,oo=eo.removeAdditionalData,ro=eo.setPlayState,ao=eo.setViewMode,io=eo.setVolume,lo=eo.setAdditionalData,uo=eo.setAudio,so=eo.setSubtitles,co=Zn.reducer,po={home:"/activation",video:"/video"},fo={home:po.home,video:"".concat(po.video,"/:videoId?")};var yo=it({en:{newCode:"Enter a new code"},ru:{newCode:"Ввести новый код"}}),ho=n(242),vo=n.n(ho),bo=n(243),mo=n.n(bo),go=n(244),_o=n.n(go),Oo=n(162),Po=n.n(Oo),So=it({en:{genres:"Genre",duration:"Duration",durationUnits:"{ value, plural, =0{ 0 minutes } one{ 1 minute } other{ # minutes } }",mainActorList:"Cast",director:"Director",availableUntil:"Available until ",expand:"Expand",collapse:"Collapse"},ru:{genres:"Жанр",duration:"Продолжительность",durationUnits:"{ value, plural, =0{ 0 минут } one{ # минута } few{ # минуты } many{ # минут } }",mainActorList:"В ролях",director:"Режиссёр",availableUntil:"Доступен до ",expand:"Развернуть",collapse:"Свернуть"}}),Eo=n(245),ko=n.n(Eo),Ro=n(253);n(513);function To(e){return(To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function No(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function wo(e,t){return(wo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Do(e,t){return!t||"object"!==To(t)&&"function"!=typeof t?Co(e):t}function Co(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ao(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function jo(e){return(jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Lo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wo(e,t)}(u,e);var t,n,a,i,l=(t=u,function(){var e,n=jo(t);if(Ao()){var o=jo(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return Do(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).state={expanded:!1,truncated:!1},t.handleExpanded=t.handleExpanded.bind(Co(t)),t.handleTruncated=t.handleTruncated.bind(Co(t)),t._containerRef=Object(o.createRef)(),t}return n=u,(a=[{key:"handleExpanded",value:function(){this.setState((function(e){return{expanded:!e.expanded}}))}},{key:"handleTruncated",value:function(e){this.setState({truncated:e})}},{key:"getControlElement",value:function(){var e=this.props,t=e.expand,n=e.collapse,o=this.state.expanded;return t&&n?o?n:t:r.a.createElement(ko.a,null,o?"keyboard_arrow_up":"keyboard_arrow_down")}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.text,o=e.lines,a=e.ellipsis,i=e.expand,l=e.collapse,u=this.state,s=u.expanded,c=u.truncated,p=r.a.createElement("div",null,n);return r.a.createElement("div",{ref:this._containerRef,className:je()("vp-show-more-text",t)},s?p:r.a.createElement(Ro.a,{lines:o,onTruncate:this.handleTruncated,ellipsis:r.a.createElement("span",null,a)},p),c&&r.a.createElement("span",{className:je()({"vp-show-more-text__show":!i&&!l}),onClick:this.handleExpanded},this.getControlElement()))}}])&&No(n.prototype,a),i&&No(n,i),u}(o.PureComponent);Lo.propTypes={text:Le.node.isRequired,className:Le.string,collapse:Le.node,ellipsis:Le.node,expand:Le.node,lines:Le.number},Lo.defaultProps={ellipsis:"...",lines:3};n(514);function Io(e){return(Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Uo(e,t){return(Uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vo(e,t){return!t||"object"!==Io(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Fo(e){return(Fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qo={hour:"numeric",minute:"numeric"},Go={day:"numeric",month:"long",year:"numeric"},Ho=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uo(e,t)}(l,e);var t,n,o,a,i=(t=l,function(){var e,n=Fo(t);if(Bo()){var o=Fo(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return Vo(this,e)});function l(){return Mo(this,l),i.apply(this,arguments)}return n=l,(o=[{key:"createDetailsTable",value:function(e){var t=this.props.videoDescription,n=t.genres,o=t.duration,a=t.mainActorList,i=t.director,l=[{key:e("genres"),value:n.join(", ")},{key:e("duration"),value:e("durationUnits",{value:Math.floor(o)})},{key:e("mainActorList"),value:a.join(", ")},{key:e("director"),value:i}];return r.a.createElement(vo.a,{className:"vp-description__description-details-container",fullWidth:!0,plain:!0},r.a.createElement(mo.a,{className:"vp-description__description-details-container-table"},l.filter((function(e){return e.value&&e.value.length})).map((function(e){return r.a.createElement(_o.a,{className:"vp-description__description-details-container-row",key:e.key},r.a.createElement(Po.a,null,e.key.toUpperCase()),r.a.createElement(Po.a,{grow:!0},e.value))}))))}},{key:"createInfoBar",value:function(e){var t=this.props,n=t.videoDescription,o=n.year,a=n.country,i=n.availableUntil,l=n.prLevel,u=(new Date).getTime(),s=function(e){return wn()(e)&&e>0},c=Boolean(Je()(a)&&a.length),p=r.a.createElement("span",{className:"vp-description__description-info-bar-element-bullet"});return r.a.createElement("ul",{className:"vp-description__description-info-bar"},s(o)&&r.a.createElement("li",{className:"vp-description__description-info-bar-element"},o),c&&r.a.createElement("li",{className:"vp-description__description-info-bar-element"},s(o)&&p,a),s(i)&&i>u&&r.a.createElement("li",{className:"vp-description__description-info-bar-element"},(c||s(o))&&p,e("availableUntil"),Xe.formatTime(t,i,qo)," ",Xe.formatDate(t,i,Go)),wn()(l)&&-1!==l&&r.a.createElement("li",{className:"vp-description__description-info-bar-element"},r.a.createElement("span",{className:"vp-description__description-info-bar-age-limit"},"".concat(l,"+"))))}},{key:"render",value:function(){var e=this.props.videoDescription,t=e.filmName,n=e.description,o=e.srcImgFile,a=Xe.textBy(So,this.props);return r.a.createElement("div",{className:"vp-description__container"},r.a.createElement("div",{className:"vp-description__poster-container"},r.a.createElement("img",{alt:t,className:"vp-description__poster-image",src:o||vn("no-video.svg")})),r.a.createElement("div",{className:"vp-description__box"},r.a.createElement("h1",{className:"vp-description__title"},t),this.createInfoBar(a),r.a.createElement(Lo,{className:"vp-description__text",text:n,lines:3,ellipsis:"...",collapse:r.a.createElement("span",{className:"vp-description__text-collapse"},a("collapse")),expand:r.a.createElement("span",{className:"vp-description__text-expand"},a("expand"))}),this.createDetailsTable(a)))}}])&&xo(n.prototype,o),a&&xo(n,a),l}(o.PureComponent);Ho.propTypes={videoDescription:Le.object.isRequired};Xe.injectIntl(Ho),n(515);var Ko=function(){return r.a.createElement("div",{className:"vp-footer"})},Wo=it({en:{pause:"Pause",play:"Play",playTime:"{pastTime} / {duration}",pointerTime:"{pastTime}",mute:"Mute",unmute:"Unmute",fullscreen:"Fullscreen (f)",exitFullscreen:"Exit fullscreen mode (f)",subtitlesTooltip:"Audio & Subtitles",subtitles:"Subtitles",audio:"Audio",disableSubtitles:"Disabled",noAudio:"No audio available"},ru:{pause:"Пауза",play:"Смотреть",mute:"Отключить звук",unmute:"Включить звук",fullscreen:"Во весь экран (f)",exitFullscreen:"Выход из полноэкранного режима (f)",subtitlesTooltip:"Аудио и субтитры",subtitles:"Субтитры",audio:"Аудио",disableSubtitles:"Выключены",noAudio:"Нет доступных дорожек"}}),Yo=1,Xo=2,zo={SPACE:32,F:70},Jo={componentWillUnmount:function(){this._playback&&("function"==typeof this._playback.dispose&&this._playback.dispose(),this._playback=null)}},Qo={_playback:null,_doSetPlayback:function(e){},_setPlayback:function(e){var t=this.props.setPlayback,n=this._playback;this._playback=e,this._doSetPlayback(e,n),"function"==typeof t&&t(e,n)},addPlayEventHandler:function(e,t,n){var o=this._playback;return o&&o.on(e,t,n||null===n?n:this),this},addBeforeStopHandler:function(e,t){var n=this._playback;return n?this.addPlayEventHandler(n.eventTypeMap.beforeStop,e,t):this},addPlayErrorHandler:function(e,t){var n=this._playback;return n?this.addPlayEventHandler(n.eventTypeMap.playError,e,t):this},addPlayStartHandler:function(e,t){var n=this._playback;return n?this.addPlayEventHandler(n.eventTypeMap.playStart,e,t):this},addPlayStateChangeHandler:function(e,t){var n=this._playback;return n?this.addPlayEventHandler(n.eventTypeMap.playStateChange,e,t):this},addAudioDataHandler:function(e,t){var n=this._playback;return n?this.addPlayEventHandler(n.eventTypeMap.audioData,e,t):this},addSubtitleDataHandler:function(e,t){var n=this._playback;return n?this.addPlayEventHandler(n.eventTypeMap.subtitleData,e,t):this},getTotalTime:function(){var e=this._playback;return e?e.getTotalTime():0},getPlayPosition:function(){var e=this._playback;return e?e.getPlayPosition():0},setPlayPosition:function(e){var t=this._playback,n=this.props.onPlayPositionChange;t&&(t.setPlayPosition(e),"function"==typeof n&&n(e))},_bindGetTotalTime:function(){this.getTotalTime=this.getTotalTime.bind(this)},_bindGetPlayPosition:function(){this.getPlayPosition=this.getPlayPosition.bind(this)},_bindSetPlayback:function(){this._setPlayback=this._setPlayback.bind(this)},_bindSetPlayPosition:function(){this.setPlayPosition=this.setPlayPosition.bind(this)},_bindPlaybackMethods:function(){this._bindGetPlayPosition(),this._bindSetPlayback(),this._bindSetPlayPosition(),this._bindGetTotalTime()}},$o=n(247),Zo=n(164),er=n.n(Zo),tr=n(248),nr=n.n(tr);function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ar(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ir(e,t,n){return(ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cr(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function lr(e,t){return(lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ur(e,t){return!t||"object"!==or(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function cr(e){return(cr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lr(e,t)}(i,e);var t,n,o,r,a=(t=i,function(){var e,n=cr(t);if(sr()){var o=cr(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return ur(this,e)});function i(){return rr(this,i),a.apply(this,arguments)}return n=i,(o=[{key:"setEventTypeMap",value:function(e,t,n){t||(t=this);var o="function"==typeof t,r=o?t.prototype:t,a=r.eventTypeMap=Object.create(r.eventTypeMap||null);Object.assign(a,e),o&&n&&(t.eventTypeMap=a)}},{key:"doDispose",value:function(){ir(cr(i.prototype),"doDispose",this).call(this),this.off()}}])&&ar(n.prototype,o),r&&ar(n,r),i}(P);function fr(e){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function yr(e,t,n){return(yr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gr(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function hr(e,t){return(hr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vr(e,t){return!t||"object"!==fr(t)&&"function"!=typeof t?br(e):t}function br(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function gr(e){return(gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}nr()(pr.prototype);var _r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hr(e,t)}(i,e);var t,n,o,r,a=(t=i,function(){var e,n=gr(t);if(mr()){var o=gr(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return vr(this,e)});function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e))._config=e.config||{},t._container=e.container,t._controller=e.controller,t._goToPlayStartPos=t._goToPlayStartPos.bind(br(t)),t._config.stopOnHide&&(t._onVisibilityChange=t._onVisibilityChange.bind(br(t)),document.addEventListener("visibilitychange",t._onVisibilityChange)),t}return n=i,(o=[{key:"getConfig",value:function(){return this._config}},{key:"getContainer",value:function(){return this._container}},{key:"getController",value:function(){return this._controller}},{key:"getPlaySettings",value:function(){var e=this._playData;return e&&e.settings||null}},{key:"getPlayStartPosition",value:function(){var e=this.getPlaySettings();return e&&e.startPosition||null}},{key:"getPlayVideo",value:function(){var e=this.getPlaySettings();return e&&e.video||null}},{key:"getPlayVideoType",value:function(){var e=this.getPlaySettings();return e&&e.videoType||null}},{key:"getPlayUrl",value:function(){var e=this._playData;return e&&e.url||""}},{key:"isPlayStarted",value:function(){return this._playStarted}},{key:"getTotalTime",value:function(){return 0}},{key:"getPlayPosition",value:function(){return 0}},{key:"_seekPlayPosition",value:function(e){}},{key:"setPlayPosition",value:function(e){var t,n=this._playData;if(e=Math.floor(e),n)if(this.isPlaying())try{e<0?e=0:e>(t=this.getTotalTime())&&(e=t),this._seekPlayPosition(e)}catch(e){this.logError("setPlayPosition error: ",e)}else(n.settings||(n.settings={})).startPosition=e;return this}},{key:"_goToPlayStartPos",value:function(){var e=this.getPlayStartPosition();e&&(this._seekPlayPosition(e),this.log("_goToPlayStartPos: start pos -",e)),this._startPosTimeoutId=null}},{key:"_cancelPlayStartPosMove",value:function(){this._startPosTimeoutId&&(clearTimeout(this._startPosTimeoutId),this._startPosTimeoutId=null)}},{key:"getRewindTimeSkip",value:function(){return this._rewindTimeSkip}},{key:"setRewindTimeSkip",value:function(e){return this._rewindTimeSkip=e,this}},{key:"rewindByPosition",value:function(e){var t,n;this.play(),(t=this.getPlayPosition()+(e-1)*this.getRewindTimeSkip())<0?t=0:t>(n=this.getTotalTime())&&(t=n),this.setPlayPosition(t)}},{key:"fastForward",value:function(e){return this.doFastForward(e),this}},{key:"rewind",value:function(e){return this.fastForward(e>0?-e:e)}},{key:"getPlayState",value:function(){return this._playState}},{key:"isPlay",value:function(){return this._playState===Ln.play}},{key:"isPlaying",value:function(){var e=this._playState;return e===Ln.play||e===Ln.pause}},{key:"_setPlayState",value:function(e){return this._playState=e,this.logDebug("_setPlayState: new state - ",e).emit(this.eventTypeMap.playStateChange,e),this}},{key:"play",value:function(){this.getController().play()}},{key:"doStop",value:function(){this.getController().stop()}},{key:"stop",value:function(e){return this._cancelPlayStartPosMove(),this.emit(this.eventTypeMap.beforeStop,this._playState),this.doStop(),this._setPlayState(Ln.stop),e||(this._playData=null,this._playStarted=!1),this}},{key:"isStop",value:function(){return this._playState===Ln.stop}},{key:"getAudioData",value:function(){return null}},{key:"getAudioLang",value:function(){return""}},{key:"_doSetAudioLang",value:function(e){}},{key:"setAudioLang",value:function(e){try{this._doSetAudioLang(e)}catch(t){this.logError("setAudioLang error: lang - ",e,"; error -",t)}}},{key:"getAudioName",value:function(){return""}},{key:"_doSetAudioName",value:function(e){}},{key:"setAudioName",value:function(e){try{this._doSetAudioName(e)}catch(t){this.logError("setAudioName error: name - ",e,"; error -",t)}}},{key:"_doSetAudioTrack",value:function(e){}},{key:"setAudioTrack",value:function(e){this._doSetAudioTrack(e)}},{key:"getSubtitleData",value:function(){return null}},{key:"getSubtitleLang",value:function(){return""}},{key:"_doSetSubtitleLang",value:function(e){}},{key:"setSubtitleLang",value:function(e){try{this._doSetSubtitleLang(e)}catch(t){this.logError("setSubtitleLang error: lang - ",e,"; error -",t)}}},{key:"getSubtitleName",value:function(){return""}},{key:"_doSetSubtitleName",value:function(e){}},{key:"setSubtitleName",value:function(e){try{this._doSetSubtitleName(e)}catch(t){this.logError("setSubtitleName error: name - ",e,"; error -",t)}}},{key:"_doPlayHttpStream",value:function(e,t){return!1}},{key:"playHttpStream",value:function(e,t){this._cancelPlayStartPosMove();var n={url:e,settings:t};return this.emit(this.eventTypeMap.playStart,{newPlayData:n,playData:this._playData}),t&&"stop"in t&&!t.stop||!this.isPlaying()||this.stop(),this._playData=n,this._playStarted=!1,this._doPlayHttpStream(e,t)}},{key:"doPause",value:function(){return this.getController().pause(),!0}},{key:"pause",value:function(){return this.doPause()&&this._setPlayState(Ln.pause),this}},{key:"isPause",value:function(){return this._playState===Ln.pause}},{key:"getAudioVolume",value:function(){return 0}},{key:"_doSetAudioVolume",value:function(e){}},{key:"setAudioVolume",value:function(e){return e<0?e=0:e>100&&(e=100),this._doSetAudioVolume(e)}},{key:"changeAudioVolume",value:function(e){return this.setAudioVolume(this.getAudioVolume()+e),this}},{key:"_onVisibilityChange",value:function(){var e=document.hidden;if(this._playData&&(e&&this.isPlay()||!e&&this._playOnShow)){var t=this.getPlaySettings(),n=(t&&t.videoType)===Yo||!1;this._playOnShow=e,e?n?this.stop(!0):this.pause():n?this._doPlayHttpStream(this.getPlayUrl(),t):t&&t.videoType===Xo?this.pause():this.play()}}},{key:"_getPlayError",value:function(e){return e&&e.error}},{key:"_onPlayStart",value:function(){this._playStarted||(this._playStarted=!0,this.getPlayStartPosition()&&(this._startPosTimeoutId=setTimeout(this._goToPlayStartPos,800))),this._playState!==Ln.play&&this._setPlayState(Ln.play)}},{key:"_onPlayEnd",value:function(){this._playStarted=!1,this._setPlayState(Ln.end)}},{key:"_onPlayError",value:function(e){var t,n,o,r=this._getPlayError(e),a="";r&&"object"===fr(r)&&("type"in r&&(o=r.type,a="type - ".concat(o)),"code"in r&&(n=r.code,a="".concat(a?a+", ":"","code - ").concat(n))),this.logError("".concat("Play error",": ").concat(a?a+", ":"","error - "),r),a=a?"".concat("Play error",": ").concat(a):"Play error","networkError"===o&&404===n?(n=w.CONTENT_NOT_FOUND,t=!0,this._playStarted=!1):n=w.PLAY_ERROR,t&&this._playState!==Ln.error&&this._setPlayState(Ln.error),this.emit(this.eventTypeMap.playError,new A(n,a,r))}},{key:"_onAudioData",value:function(e){this.log("_onAudioData: data - ",e).emit(this.eventTypeMap.audioData,this.getAudioData())}},{key:"_onSubtitleData",value:function(e){this.log("_onSubtitleData: data - ",e).emit(this.eventTypeMap.subtitleData,this.getSubtitleData())}},{key:"doDispose",value:function(){yr(gr(i.prototype),"doDispose",this).call(this),document.removeEventListener("visibilitychange",this._onVisibilityChange),this._config=null,this._container=null,this._controller=null,this._playData=null}}])&&dr(n.prototype,o),r&&dr(n,r),i}(pr);function Or(e){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Sr(e,t,n){return(Sr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nr(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Er(e,t){return(Er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kr(e,t){return!t||"object"!==Or(t)&&"function"!=typeof t?Rr(e):t}function Rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Nr(e){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wr(e,t,n){var o,r,a,i=e||[],l=t||[],u=null;if(i.length||l.length){var s=[];a=s,(r=n)in(o={langList:i,nameList:l})?Object.defineProperty(o,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[r]=a,u=o;for(var c=0,p=(i.length?i:l).length;c<p;c++)s.push({lang:i[c]||"",name:l[c]||i[c]||""})}return u}_r.prototype.doFastForward=_r.prototype.rewindByPosition,_r.prototype.setEventTypeMap({audioData:"audioData",beforeStop:"beforeStop",playError:"playError",playStart:"playStart",playStateChange:"playStateChange",subtitleData:"subtitleData"}),_r.prototype.setLoggerName("playback/Base"),_r.prototype._config=null,_r.prototype._container=null,_r.prototype._controller=null,_r.prototype._rewindTimeSkip=5e3,_r.prototype._playData=null,_r.prototype._playOnShow=!1,_r.prototype._playState=Ln.stop,_r.prototype._playStarted=!1,_r.prototype._startPosTimeoutId=null;var Dr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Er(e,t)}(i,e);var t,n,o,r,a=(t=i,function(){var e,n=Nr(t);if(Tr()){var o=Nr(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return kr(this,e)});function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e);var n=e.useLog,o=t._controller=new er.a.Player({source:"",baseUrl:"lib/frontstage-player/",parent:t.getContainer(),mimeType:"application/vnd.apple.mpegurl",autoPlay:!1,chromeless:!0,allowUserInteraction:!1,disableKeyboardShortcuts:!0,exitFullscreenOnEnd:!1,width:"100%",height:"100%",hlsjsConfig:{debug:n,enableWorker:!0,startLevel:-1},logLevel:n?1:-1}),r=er.a.Events;return o.on(r.PLAYER_PLAY,t._onPlayStart,Rr(t)),o.on(r.PLAYER_ENDED,t._onPlayEnd,Rr(t)),o.on(r.PLAYER_ERROR,t._onPlayError,Rr(t)),o.on(r.PLAYER_AUDIO_TRACKS_UPDATED,t._onAudioData,Rr(t)),o.on(r.PLAYER_SUBTITLE_TRACKS_UPDATED,t._onSubtitleData,Rr(t)),t}return n=i,(o=[{key:"getTotalTime",value:function(){return 1e3*this.getController().getDuration()}},{key:"getPlayPosition",value:function(){return Math.floor(1e3*this.getController().getCurrentTime())}},{key:"_seekPlayPosition",value:function(e){this.getController().seek(Math.round(.001*e))}},{key:"getAudioData",value:function(){var e=this.getController();return wr(e.getAudioTrackLanguages(),e.getAudioTrackNames(),"audioList")}},{key:"getAudioLang",value:function(){return this.getController().getAudioTrackLanguage()||""}},{key:"_doSetAudioLang",value:function(e){this.getController().setAudioTrackLanguage(e)}},{key:"getAudioName",value:function(){return this.getController().getAudioTrackName()||""}},{key:"_doSetAudioName",value:function(e){this.getController().setAudioTrackName(e)}},{key:"_doSetAudioTrack",value:function(e){this.getController().setAudioTrackLanguage(e.iso6393Code)}},{key:"getSubtitleData",value:function(){var e=this.getController();return wr(e.getSubtitleTrackLanguages(),e.getSubtitleTrackNames(),"subtitleList")}},{key:"getSubtitleLang",value:function(){return this.getController().getSubtitleTrackLanguage()||""}},{key:"_doSetSubtitleLang",value:function(e){this.getController().setSubtitleTrackLanguage(e)}},{key:"getSubtitleName",value:function(){return this.getController().getSubtitleTrackName()||""}},{key:"_doSetSubtitleName",value:function(e){this.getController().setSubtitleTrackName(e)}},{key:"_doPlayHttpStream",value:function(e,t){var n=t&&t.audioTrack;return n&&this._doSetAudioTrack(n),this.getController().load(e,"application/vnd.apple.mpegurl",!0),!0}},{key:"getAudioVolume",value:function(){return this.getController().getVolume()}},{key:"_doSetAudioVolume",value:function(e){this.getController().core.mediaControl.setVolume(e)}},{key:"_getPlayError",value:function(e){var t=Sr(Nr(i.prototype),"_getPlayError",this).call(this,e);return t&&t.data&&!("code"in(t=t.data))&&t.response&&"code"in t.response&&(t.code=t.response.code),t}}])&&Pr(n.prototype,o),r&&Pr(n,r),i}(_r);function Cr(e){var t;return e&&(t="string"==typeof e?e:e.url||e.playlist),t||null}function Ar(e){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Lr(e,t){return(Lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ir(e,t){return!t||"object"!==Ar(t)&&"function"!=typeof t?Mr(e):t}function Mr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ur(e){return(Ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lr(e,t)}(l,e);var t,n,o,a,i=(t=l,function(){var e,n=Ur(t);if(xr()){var o=Ur(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return Ir(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e))._setContainer=t._setContainer.bind(Mr(t)),t}return n=l,(o=[{key:"componentDidMount",value:function(){var e=this.props,t=Cr(e.video),n=this.player=this._createPlayer();e.setPlayback&&e.setPlayback(n),t&&n.playHttpStream(t,this.getPlaySettings())}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=Cr(t.video),o=t.settings||{},r=t.setPlayback,a=this.player,i=e.settings||{},l=a.getPlayUrl(),u=e.setPlayback;r!==u&&(u&&u(null),r&&r(a)),n?(n===l&&Object($o.equals)(o,i)||a.playHttpStream(n,this.getPlaySettings()),a.setAudioVolume(t.volume),t.audioLang!==e.audioLang?a.setAudioLang(t.audioLang):t.audioName!==e.audioName&&a.setAudioName(t.audioName),t.subtitleLang!==e.subtitleLang?a.setSubtitleLang(t.subtitleLang):t.subtitleName!==e.subtitleName&&a.setSubtitleName(t.subtitleName)):a.isStop()||a.stop()}},{key:"componentWillUnmount",value:function(){var e=this.player,t=this.props.setPlayback;t&&t(null),e.isStop()||e.stop(),e.dispose(),this.player=null,this._container=null}},{key:"_createPlayer",value:function(){return e={initData:{config:p.play,container:this._container,useLog:p.debug.playerLog}},new Dr(e.initData);var e}},{key:"_setContainer",value:function(e){this._container=e}},{key:"getPlaySettings",value:function(){var e=this.props;return Object.assign({startPosition:e.startPosition,video:e.video,videoType:e.videoType},e.settings)}},{key:"render",value:function(){return r.a.createElement("div",{className:je()(l.addedClassName,this.props.className),ref:this._setContainer})}}])&&jr(n.prototype,o),a&&jr(n,a),l}(o.Component);Vr.addedClassName="vp-video",Vr.propTypes={audioLang:Ie.a.string,audioName:Ie.a.string,className:Ie.a.string,setPlayback:Ie.a.func,settings:Ie.a.object,startPosition:Ie.a.number,subtitleLang:Ie.a.string,subtitleName:Ie.a.string,video:Ie.a.oneOfType([Ie.a.object,Ie.a.string]),videoType:Ie.a.number,volume:Ie.a.number},Vr.defaultProps={audioLang:"",audioName:"",subtitleLang:"",subtitleName:"",volume:50};n(547);function Br(e){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Gr(e,t){return(Gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hr(e,t){return!t||"object"!==Br(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Wr(e){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gr(e,t)}(l,e);var t,n,o,a,i=(t=l,function(){var e,n=Wr(t);if(Kr()){var o=Wr(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return Hr(this,e)});function l(){return Fr(this,l),i.apply(this,arguments)}return n=l,(o=[{key:"getVideoData",value:function(e){var t=e||this.props;return t.channel||t.video||null}},{key:"render",value:function(){var e=this.props,t=e.viewMode,n=function(e){return e===Xn.usual}(t);return r.a.createElement("div",{className:je()(e.baseClassName,e.className,n?e.usualViewClassName:Qn(t)?e.wideViewClassName:Jn(t)?e.fullViewClassName:null)},r.a.createElement("div",{className:je()("vp-playarea",n?e.aspectRatioClassName:null)}),r.a.createElement(Vr,{className:e.videoClassName,ref:e.playerRef,startPosition:e.startPosition,setPlayback:e.setPlayback,audioLang:e.audioLang,audioName:e.audioName,subtitleLang:e.subtitleLang,subtitleName:e.subtitleName,video:this.getVideoData(e),videoType:e.videoType,volume:e.volume}),e.children)}}])&&qr(n.prototype,o),a&&qr(n,a),l}(o.PureComponent);Yr.propTypes={aspectRatioClassName:Ie.a.string,audioLang:Ie.a.string,audioName:Ie.a.string,baseClassName:Ie.a.string,channel:Ie.a.object,children:Ie.a.node,className:Ie.a.string,fullViewClassName:Ie.a.string,playerRef:Ie.a.func,setPlayback:Ie.a.func,startPosition:Ie.a.number,subtitleLang:Ie.a.string,subtitleName:Ie.a.string,usualViewClassName:Ie.a.string,video:Ie.a.oneOfType([Ie.a.object,Ie.a.string]),videoClassName:Ie.a.string,videoType:Ie.a.number,viewMode:Ie.a.number,volume:Ie.a.number,wideViewClassName:Ie.a.string},Yr.defaultProps={aspectRatioClassName:"vp-playarea_16x9",audioLang:"",audioName:"",baseClassName:"vp-player",fullViewClassName:"vp-player_full",subtitleLang:"",subtitleName:"",usualViewClassName:"vp-player_usual",wideViewClassName:"vp-player_wide"};var Xr=1,zr=2;var Jr=it({en:{close:"Close",refresh:"Refresh page"},ru:{close:"Закрыть",refresh:"Обновить страницу"}});n(548);var Qr=function(e){var t=e.title,n=e.message,o=e.handleClick,a=e.buttonIcon,i=e.buttonText,l=e.onClose,u=Xe.textBy(st,e);return r.a.createElement("div",{className:je()("vp-error-message-container",e.className)},r.a.createElement("h2",{className:"vp-error-message-title"},t||u("error-general-title")),r.a.createElement("p",{className:"vp-error-message-text"},n||u("error-general-text")),l&&r.a.createElement("button",{type:"button",className:"vp-error-message-close-button",onClick:l},r.a.createElement("div",{className:"vp-error-message-close-button__cross"})),r.a.createElement("button",{type:"button",className:"vp-error-message-button",onClick:o},a,i||Xe.getText(Jr,e,"refresh")))};Qr.propTypes={buttonIcon:Le.node,buttonText:Le.string,className:Le.string,handleClick:Le.func,message:Le.string,title:Le.string,onClose:Le.func},Qr.defaultProps={buttonIcon:r.a.createElement(Pn,{className:"vp-player-toolbar__control-panel-button-icon",src:vn("./player/refresh.svg")}),handleClick:function(e){e.preventDefault(),e.stopPropagation(),window.location.reload()}};var $r=Xe.injectIntl(Qr),Zr=n(249);n(550);function ea(e){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ta(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function na(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function oa(e,t){return(oa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ra(e,t){return!t||"object"!==ea(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function aa(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ia(e){return(ia=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var la=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oa(e,t)}(l,e);var t,n,o,a,i=(t=l,function(){var e,n=ia(t);if(aa()){var o=ia(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return ra(this,e)});function l(){return ta(this,l),i.apply(this,arguments)}return n=l,(o=[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.onHandleClick,o=e.tooltip,a=e.alt,i=e.children;return r.a.createElement("div",{className:"vp-player-toolbar__control-panel-tooltip-container"},r.a.createElement("button",{type:"button",className:"vp-player-toolbar__control-panel-button",onClick:n},o,t&&r.a.createElement(Pn,{className:"vp-player-toolbar__control-panel-button-icon",alt:a,src:vn("./player/".concat(t))}),i&&i))}}])&&na(n.prototype,o),a&&na(n,a),l}(o.PureComponent);la.propTypes={onHandleClick:Le.func.isRequired,alt:Le.string,children:Le.node,icon:Le.string,tooltip:Le.node},la.defaultProps={alt:""};var ua=Object(Zr.injectTooltip)(la),sa=n(250),ca=n.n(sa),pa=n(87),fa=n.n(pa),da=n(45);n(577);function ya(e){return(ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ha(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function va(e,t){return(va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ba(e,t){return!t||"object"!==ya(t)&&"function"!=typeof t?ma(e):t}function ma(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ga(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _a(e){return(_a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Oa=function(){return r.a.createElement(da.b,null,"done")},Pa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&va(e,t)}(l,e);var t,n,o,a,i=(t=l,function(){var e,n=_a(t);if(ga()){var o=_a(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return ba(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).state={visible:!1},t.handleListToggle=t.handleListToggle.bind(ma(t)),t.handleCloseList=t.handleCloseList.bind(ma(t)),t.handleVisibilityChange=t.handleVisibilityChange.bind(ma(t)),t.handleOptionSelect=t.handleOptionSelect.bind(ma(t)),t}return n=l,(o=[{key:"componentDidUpdate",value:function(e,t){var n=this.state.visible,o=this.props.playState;if(!t.visible&&n){var r=document.getElementById(this.listId);r&&r.addEventListener("mouseleave",this.handleCloseList)}else n&&e.playState!==o&&(this.removeMouseLeaveListener(),this.handleCloseList())}},{key:"componentWillUnmount",value:function(){this.removeMouseLeaveListener(),document.removeEventListener("scroll",this.handleCloseList,!0)}},{key:"removeMouseLeaveListener",value:function(){var e=document.getElementById(this.listId);e&&e.removeEventListener("mouseleave",this.handleCloseList)}},{key:"handleListToggle",value:function(){this.state.visible?(this.removeMouseLeaveListener(),this.handleCloseList()):(document.addEventListener("scroll",this.handleCloseList,!0),this.setState({visible:!0}))}},{key:"handleCloseList",value:function(){this.removeMouseLeaveListener(),this.setState({visible:!1}),document.removeEventListener("scroll",this.handleCloseList,!0)}},{key:"handleVisibilityChange",value:function(e){e?document.addEventListener("scroll",this.handleCloseList,!0):(this.removeMouseLeaveListener(),document.removeEventListener("scroll",this.handleCloseList,!0)),this.setState({visible:e})}},{key:"handleOptionSelect",value:function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget.getAttribute("data-index"),n=e.currentTarget.getAttribute("data-key");if(n&&t)switch(n){case this.listsKeys.subtitles:this.props.onSubtitlesChange(this.props.availableSubtitles.subtitleList[t]);break;case this.listsKeys.audio:this.props.onAudioChange(this.props.availableAudio.audioList[t])}this.handleCloseList()}},{key:"getOptionsList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.props,o=n.getText,a=n.activeSubtitles,i=n.activeAudio,l=-1,u=[],s=fa()(t)&&t.length;switch(e){case this.listsKeys.subtitles:u.push(r.a.createElement(da.d,{className:"vp-player-toolbar__options-list-title",component:"h2",key:"vp-player-toolbar__subtitles-header",primaryText:o("subtitles")}),r.a.createElement(da.c,{className:"vp-player-toolbar__options-list-child",onClick:this.handleOptionSelect,primaryText:o("disableSubtitles"),tileProps:{"data-index":null,"data-key":e},key:"vp-player-toolbar__subtitles-disabled",rightIcon:a?null:r.a.createElement(Oa,null)})),a&&(l=t.indexOf(a));break;case this.listsKeys.audio:u.push(r.a.createElement(da.d,{className:"vp-player-toolbar__options-list-title",component:"h2",key:"vp-player-toolbar__audio-header",primaryText:o("audio")})),i&&(l=t.indexOf(i)),s||u.push(r.a.createElement(da.d,{className:"vp-player-toolbar__options-list-placeholder",component:"div",key:"vp-player-toolbar__audio-placeholder",primaryText:o("noAudio")}))}if(fa()(t)&&t.length)for(var c=0;c<t.length;c++)u.push(r.a.createElement(da.c,{key:"".concat(e,"-option-").concat(c),className:"vp-player-toolbar__options-list-child",primaryText:t[c].name||t[c].lang||"",tileProps:{"data-index":c,"data-key":e},onClick:this.handleOptionSelect,rightIcon:c===l?r.a.createElement(Oa,null):null}));return u}},{key:"render",value:function(){var e=this.props,t=e.getText,n=(e.availableSubtitles,e.availableAudio),o=this.state.visible,a=n?n.audioList:[];return r.a.createElement(da.a,{id:"vp-player-toolbar__options",listClassName:this.listClassName,listId:this.listId,menuItems:ca()(this.getOptionsList(this.listsKeys.audio,a)),simplifiedMenu:!1,listHeightRestricted:!1,onVisibilityChange:this.handleVisibilityChange,visible:o,closeOnOutsideClick:!0,anchor:{x:da.a.HorizontalAnchors.INNER_RIGHT,y:da.a.VerticalAnchors.TOP}},r.a.createElement(ua,{id:"vp-player-toolbar__options-toggle",onHandleClick:this.handleListToggle,tooltipClassName:"vp-player-toolbar__control-panel-tooltip",tooltipPosition:"top",tooltipLabel:o?null:t("subtitlesTooltip"),icon:"subtitles.svg"}))}}])&&ha(n.prototype,o),a&&ha(n,a),l}(o.PureComponent);Pa.prototype.listsKeys={audio:"audio",subtitles:"subtitles"},Pa.prototype.listClassName="vp-player-toolbar__options-list",Pa.prototype.listId="vp-player-toolbar__options-list-component",Pa.propTypes={getText:Le.func.isRequired,onAudioChange:Le.func.isRequired,onSubtitlesChange:Le.func.isRequired,activeAudio:Le.object,activeSubtitles:Le.object,availableAudio:Le.object,availableSubtitles:Le.object,playState:Le.number};var Sa=Pa,Ea=n(165),ka=n.n(Ea),Ra=n(113),Ta=n.n(Ra),Na={getPointerPosition:function(e,t){var n=e.changedTouches,o=n?n[0]:e;return{control:this,box:(t||e.currentTarget).getBoundingClientRect(),clientX:o.clientX||0,clientY:o.clientY||0,pageX:o.pageX||0,pageY:o.pageY||0,screenX:o.screenX||0,screenY:o.screenY||0}},isPointerInside:function(e){var t=e.box,n=e.clientX,o=e.clientY,r=t.left,a=t.top;return r<=n&&n<=r+t.width&&a<=o&&o<=a+t.height}};function wa(){return(wa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Da(e){return(Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ca(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Aa(e,t){return(Aa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ja(e,t){return!t||"object"!==Da(t)&&"function"!=typeof t?La(e):t}function La(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ia(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ma(e){return(Ma=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Aa(e,t)}(u,e);var t,n,a,i,l=(t=u,function(){var e,n=Ma(t);if(Ia()){var o=Ma(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return ja(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).state={pointerPosition:null,value:t.convertValue(e.value)},t._setBox=t._setBox.bind(La(t)),t.handleClick=t.handleClick.bind(La(t)),t.handlePointerDown=t.handlePointerDown.bind(La(t)),t.handleMouseLeave=t.handleMouseLeave.bind(La(t)),t.handlePointerMove=t.handlePointerMove.bind(La(t)),t.update=t.update.bind(La(t)),t.scheduleUpdate(),t}return n=u,(a=[{key:"componentDidUpdate",value:function(e,t){var n=this.state,o=n.value,r=this.convertValue(this.props.value);r===o||o!==t.value||n.pointerPosition!==t.pointerPosition?this.scheduleUpdate():this.setValue(r)}},{key:"componentWillUnmount",value:function(){this.cancelUpdate(),this._cancelPointerPositionChange()}},{key:"_setBox",value:function(e){this._box=e}},{key:"convertValue",value:function(e){var t;return t="number"==typeof e?e:"time"===e?(new Date).getTime():Number(e),isNaN(t)&&(t=0),t}},{key:"getProgressData",value:function(e){var t=this.props,n=t.end,o=t.start,r="number"==typeof e?e:this.state.value,a=n-o,i=r-o,l=a?100*i/a:0;return l<0?l=0:l>100&&(l=100),{start:o,end:n,value:r,progress:l,length:a,past:i,rest:n-r,control:this,data:t.data}}},{key:"getNewValue",value:function(){var e=this.props.update,t=this.state.value,n=Da(e),o=t;return"function"===n?o=Number(e(this.getProgressData())):"number"===n?o+=e:"time"===e&&(o=(new Date).getTime()),isNaN(o)&&(o=t),o}},{key:"setValue",value:function(e){var t,n,o,r=this.props;"function"==typeof r.onEnd&&e===r.end&&(n=r.onEnd),"function"==typeof r.onUpdate&&(o=r.onUpdate),this.setState({value:e}),(o||n)&&(t=this.getProgressData(e),o&&o(t),n&&n(t))}},{key:"cancelUpdate",value:function(){var e=this._updateTimeoutId;e&&(clearTimeout(e),this._updateTimeoutId=null)}},{key:"scheduleUpdate",value:function(e){var t=this.props,n=t.updatePeriod,o="number"==typeof e?e:this.state.value;this.cancelUpdate(),n&&n>0&&t.shouldScheduleUpdate(o,t,this)&&(this._updateTimeoutId=setTimeout(this.update,1e3*n))}},{key:"update",value:function(e){var t=null==e?this.getNewValue():this.convertValue(e);t===this.state.value?this.scheduleUpdate():this.setValue(t)}},{key:"getPointerData",value:function(e){return Object.assign(e,this.getProgressData(this.props.computePointerValue(e)))}},{key:"_cancelPointerPositionChange",value:function(){var e=this._pointerPosChangeTimeoutId;e&&(clearTimeout(e),this._pointerPosChangeTimeoutId=null)}},{key:"_setPointerPosition",value:function(e){var t=this.props.onPointerDataChange;this._cancelPointerPositionChange(),this.state.pointerPosition!==e&&(this._lastPointerPosChange=(new Date).getTime(),this.setState({pointerPosition:e}),"function"==typeof t&&t(e?this.getPointerData(e):null))}},{key:"handleClick",value:function(e){if(this._changeStarted){var t,n,o=this.props,r=o.onValueChange,a=this.getPointerPosition(e);this.isPointerInside(a)&&(e.preventDefault(),e.stopPropagation(),n=r?(t=this.getPointerData(a)).value:o.computePointerValue(a),this.update(n),r&&r(n,t)),this._changeStarted=!1,this._setPointerPosition(null)}}},{key:"handlePointerDown",value:function(e){var t=this.props;t.allowChange&&(this._changeStarted=!0),t.showPointerData&&!this.state.pointerPosition&&this._setPointerPosition(this.getPointerPosition(e))}},{key:"handleMouseLeave",value:function(e){this._setPointerPosition(null)}},{key:"handlePointerMove",value:function(e){var t=this,n=this.getPointerPosition(e),o=this.isPointerInside(n),r=this.props.pointerDataChangeDelay;!o||!r||(new Date).getTime()-this._lastPointerPosChange>=r?this._setPointerPosition(o?n:null):(this._cancelPointerPositionChange(),this._pointerPosChangeTimeoutId=setTimeout((function(){t._setPointerPosition(n)}),r))}},{key:"findClassSet",value:function(e,t){return"function"==typeof e?e(t||this.getProgressData()):e}},{key:"getBoxClassSet",value:function(e){return this.findClassSet(this.props.boxClassName,e)}},{key:"getClassSet",value:function(e){return this.findClassSet(this.props.className,e)}},{key:"findStyle",value:function(e,t){var n,o,r,a,i=Da(e);return"string"===i&&e?(o={},r=e,a="".concat((t||this.getProgressData()).progress,"%"),r in o?Object.defineProperty(o,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[r]=a,n=o):n="function"===i?e(t||this.getProgressData()):e,n}},{key:"getBoxStyle",value:function(e){return this.findStyle(this.props.boxStyle,e)}},{key:"getStyle",value:function(e){return this.findStyle(this.props.style,e)}},{key:"getContent",value:function(e){var t=this.props.children,n=Array.isArray(t);if(n||"function"==typeof t){var r=e||this.getProgressData();if(n){for(var a,i=[],l=0,u=t.length;l<u;l++)a=t[l],i.push("function"==typeof a?a(r):a);return o.Children.toArray(i)}return t(r)}return t}},{key:"getPointerDataView",value:function(e){var t=this.props.pointerDataView;return"function"==typeof t?t(e?this.getPointerData(e):null):t}},{key:"render",value:function(){var e=this.props,t=e.allowChange,n=e.box,o=e.boxClassName,a=e.boxStyle,i=e.children,l=e.nestedChildren,u=e.className,s=e.pointerDataView,c=e.showPointerData,p=e.style,f=c&&s||null,d=i||u||p||n&&(o||a)?this.getProgressData():null,y={ref:this._setBox};t&&(y.onClick=y.onTouchEnd=this.handleClick),f&&(y.onMouseMove=y.onTouchMove=this.handlePointerMove,y.onMouseLeave=this.handleMouseLeave,f=this.getPointerDataView(this.state.pointerPosition)),(t||f)&&(y.onMouseDown=y.onTouchStart=this.handlePointerDown);var h=r.a.createElement("div",wa({},n?null:y,{className:u&&this.getClassSet(d),style:p&&this.getStyle(d)}),l&&i&&this.getContent(d),n?null:f);if(n){var v=n;h=r.a.createElement(v,wa({},y,{className:o&&this.getBoxClassSet(d),style:a&&this.getBoxStyle(d)}),h,f,!l&&i&&this.getContent(d))}return h}}])&&Ca(n.prototype,a),i&&Ca(n,i),u}(o.PureComponent);function Ua(e){var t=e.control.props,n=t.start,o=e.box,r=e.clientX,a=o.width;return a&&r?n+(t.end-n)*(r-o.left)/a:0}function Va(e){return r.a.createElement(xa,e)}Object.assign(xa.prototype,Na),xa.prototype._changeStarted=!1,xa.prototype._lastPointerPosChange=0,xa.prototype._pointerPosChangeTimeoutId=null,xa.prototype._updateTimeoutId=null,xa.propTypes={allowChange:Ie.a.bool,box:Ie.a.string,boxClassName:Ie.a.oneOfType([Ie.a.func,Ie.a.string]),boxStyle:Ie.a.oneOfType([Ie.a.func,Ie.a.object]),children:Ie.a.oneOfType([Ie.a.func,Ie.a.node,Ie.a.arrayOf(Ie.a.oneOfType([Ie.a.func,Ie.a.node]))]),className:Ie.a.oneOfType([Ie.a.func,Ie.a.string]),computePointerValue:Ie.a.func,data:Ie.a.any,end:Ie.a.number,nestedChildren:Ie.a.bool,pointerDataChangeDelay:Ie.a.number,pointerDataView:Ie.a.oneOfType([Ie.a.func,Ie.a.node]),shouldScheduleUpdate:Ie.a.func,showPointerData:Ie.a.bool,start:Ie.a.number,style:Ie.a.oneOfType([Ie.a.func,Ie.a.object,Ie.a.string]),update:Ie.a.oneOfType([Ie.a.func,Ie.a.number,Ie.a.oneOf(["time"])]),updateAfter:Ie.a.bool,updateBefore:Ie.a.bool,updatePeriod:Ie.a.oneOfType([Ie.a.number,Ie.a.oneOf([!1,null,void 0,""])]),value:Ie.a.oneOfType([Ie.a.number,Ie.a.string]),onEnd:Ie.a.func,onPointerDataChange:Ie.a.func,onUpdate:Ie.a.func,onValueChange:Ie.a.func},xa.defaultProps={allowChange:!1,computePointerValue:function(){return 0},end:100,nestedChildren:!0,shouldScheduleUpdate:function(e,t){return Boolean((e>=t.start||t.updateBefore)&&(e<t.end||t.updateAfter))},showPointerData:!1,start:0,update:1,updateAfter:!1,updateBefore:!1,value:0},Va.defaultProps={computePointerValue:Ua,style:"width"};n(585);function Ba(e){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fa(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function qa(e,t){return(qa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ga(e,t){return!t||"object"!==Ba(t)&&"function"!=typeof t?Ha(e):t}function Ha(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ka(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Wa(e){return(Wa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ya=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qa(e,t)}(u,e);var t,n,a,i,l=(t=u,function(){var e,n=Wa(t);if(Ka()){var o=Wa(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return Ga(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).state={playPosition:t.props.getPlayPosition?t.props.getPlayPosition():0,pointerValue:null,progressUpdating:!0},t.handlePositionChange=t.handlePositionChange.bind(Ha(t)),t.handlePositionUpdate=t.handlePositionUpdate.bind(Ha(t)),t.handleChangeFinally=t.handleChangeFinally.bind(Ha(t)),t.handleMouseDown=t.handleMouseDown.bind(Ha(t)),t.handleProgressMouseEnter=t.handleProgressMouseEnter.bind(Ha(t)),t.handleProgressMouseLeave=t.handleProgressMouseLeave.bind(Ha(t)),t.handleProgressMouseMove=t.handleProgressMouseMove.bind(Ha(t)),t.startTimeRef=Object(o.createRef)(),t.progressSliderRef=Object(o.createRef)(),t}return n=u,(a=[{key:"componentDidMount",value:function(){this.updateAvailableProgress(),this.progressSliderRef.current&&this.progressSliderRef.current.addEventListener("mousedown",this.handleMouseDown)}},{key:"componentDidUpdate",value:function(e){var t=this.props;e.availableProgress!==t.availableProgress&&this.updateAvailableProgress(),t.playState!==Ln.end&&t.playState!==Ln.error||this.handleProgressReset(),e.errorDisplayed&&!t.errorDisplayed&&this.updatePlayStatePosition()}},{key:"componentWillUnmount",value:function(){this.progressSliderRef.current&&this.progressSliderRef.current.removeEventListener("mousedown",this.handleMouseDown)}},{key:"updatePlayStatePosition",value:function(){var e=this.props.getPlayPosition;e&&this.setState({playPosition:e()})}},{key:"updateAvailableProgress",value:function(){var e=this.props,t=e.availableProgress,n=e.duration;if(this.progressSliderRef.current){var o=100*t/n;this.progressSliderRef.current.firstChild.style.width=t?"".concat(o||100,"%"):"100%"}}},{key:"handlePointerDataChange",value:function(e){e&&this.setState({pointerValue:e})}},{key:"handleProgressMouseMove",value:function(e){if(this.progressSliderRef.current){var t=Na.getPointerPosition.call({props:{start:0,end:this.props.duration||0}},e,this.progressSliderRef.current);this.handlePointerDataChange(Ua(t))}}},{key:"handleMouseDown",value:function(e){e.preventDefault()}},{key:"handleProgressReset",value:function(){var e=this;this.setState({playPosition:0},(function(){e.handleChangeFinally()}))}},{key:"handlePositionChange",value:function(e){var t=this.state.pointerValue;this.setState({playPosition:t||e})}},{key:"handlePositionUpdate",value:function(e){this.state.progressUpdating&&this.setState({playPosition:e.past})}},{key:"handleChangeFinally",value:function(){var e=this.state.playPosition,t=this.props.handlePlayPositionChange;t&&e&&t(e)}},{key:"handleProgressMouseEnter",value:function(){this.setState({progressUpdating:!1})}},{key:"handleProgressMouseLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({pointerValue:null,progressUpdating:!0})}},{key:"render",value:function(){var e=this.props,t=e.duration,n=e.getPlayPosition,o=e.availableProgress,a=e.playState,i=this.state,l=i.playPosition,u=i.pointerValue,s=a===Ln.play||a===Ln.pause,c=t||0,p=s&&o>1;return r.a.createElement("div",{className:"vp-player-toolbar__control-panel-progress_container"},r.a.createElement("div",{className:"vp-player-toolbar__control-panel-played-time",ref:this.startTimeRef},ka()(u||l)),r.a.createElement(Va,{className:"vp-player-toolbar__control-panel-progress",box:"div",boxClassName:"vp-player-toolbar__control-panel-progress_bar",start:0,end:c,nestedChildren:!1,value:l,update:n||"time",updatePeriod:1,allowChange:!1,showPointerData:s,onUpdate:this.handlePositionUpdate},r.a.createElement("div",{className:"vp-player-toolbar__control-panel-slider-wrapper",ref:this.progressSliderRef,onMouseMove:this.handleProgressMouseMove,onTouchMove:this.handleProgressMouseMove,onMouseEnter:this.handleProgressMouseEnter,onMouseLeave:this.handleProgressMouseLeave},r.a.createElement(Ta.a,{className:"vp-player-toolbar__control-panel-slider",orientation:"horizontal",min:0,max:o,step:1,tooltip:!1,value:l,onChange:p&&this.handlePositionChange||null,onChangeComplete:p&&this.handleChangeFinally||null}))),r.a.createElement("div",{className:"vp-player-toolbar__control-panel-end-time"}," ".concat(ka()(c))))}}])&&Fa(n.prototype,a),i&&Fa(n,i),u}(o.PureComponent);Ya.propTypes={availableProgress:Le.number,duration:Le.number,errorDisplayed:Le.bool,getPlayPosition:Le.func,handlePlayPositionChange:Le.func,playState:Le.number},Ya.defaultProps={availableProgress:1};var Xa=Ya;n(586);function za(e){return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ja(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Qa(e,t){return(Qa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $a(e,t){return!t||"object"!==za(t)&&"function"!=typeof t?Za(e):t}function Za(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ei(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ti(e){return(ti=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ni=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qa(e,t)}(u,e);var t,n,a,i,l=(t=u,function(){var e,n=ti(t);if(ei()){var o=ti(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return $a(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).state={volume:t.props.volume},t.handleMouseDown=t.handleMouseDown.bind(Za(t)),t.handleVolumeChange=t.handleVolumeChange.bind(Za(t)),t.volumeControlRef=Object(o.createRef)(),t}return n=u,(a=[{key:"componentDidMount",value:function(){this.volumeControlRef.current&&this.volumeControlRef.current.addEventListener("mousedown",this.handleMouseDown)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.volume,o=this.state;n!==o.volume&&o.volume===t.volume&&this.setState({volume:n})}},{key:"componentWillUnmount",value:function(){this.cancelVolumeChange(),this.volumeControlRef.current&&this.volumeControlRef.current.removeEventListener("mousedown",this.handleMouseDown)}},{key:"cancelVolumeChange",value:function(){var e=this._changeTimeoutId;e&&(clearTimeout(e),this._changeTimeoutId=null)}},{key:"handleMouseDown",value:function(e){e.preventDefault()}},{key:"handleVolumeChange",value:function(e){var t=this,n=this.props,o=n.changeDelay,r=n.onChange;this.cancelVolumeChange(),this.setState({volume:e}),"function"==typeof r&&(o?this._changeTimeoutId=setTimeout((function(){r(e),t._changeTimeoutId=null}),o):r(e))}},{key:"render",value:function(){var e=this.state.volume;return r.a.createElement("div",{ref:this.volumeControlRef,className:"vp-volume-control"},r.a.createElement(Ta.a,{className:"vp-volume-control__slider",orientation:"horizontal",min:0,max:100,tooltip:!1,value:e,onChange:this.handleVolumeChange}))}}])&&Ja(n.prototype,a),i&&Ja(n,i),u}(o.PureComponent);ni.propTypes={changeDelay:Le.number,volume:Le.number,onChange:Le.func},ni.defaultProps={changeDelay:300,volume:0};var oi=ni;n(587);function ri(e){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ai(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ii(e,t){return(ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function li(e,t){return!t||"object"!==ri(t)&&"function"!=typeof t?ui(e):t}function ui(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function si(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ci(e){return(ci=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ii(e,t)}(u,e);var t,n,a,i,l=(t=u,function(){var e,n=ci(t);if(si()){var o=ci(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return li(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).autoHideTimeout=4e3,t.state={playing:e.playing,paused:e.paused,error:e.error,display:!1,availableProgress:e.playing||e.paused?e.getTotalTime():1},t.hide=t.hide.bind(ui(t)),t.handleMouseMove=t.handleMouseMove.bind(ui(t)),t.handleMouseWheel=t.handleMouseWheel.bind(ui(t)),t.leftControlPanelRef=Object(o.createRef)(),t}return n=u,i=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.paused,o=e.playing,r=e.error;return n!==t.paused||o!==t.playing||r!==t.error?{paused:n,playing:o,error:r,availableProgress:e.playing||e.paused?e.getTotalTime():1}:null}}],(a=[{key:"componentDidMount",value:function(){this.leftControlPanelRef.current&&this.leftControlPanelRef.current.addEventListener(this.wheelEvent,this.handleMouseWheel,{passive:!1})}},{key:"componentDidUpdate",value:function(e,t){var n=this.state,o=n.playing,r=n.display;(o&&o!==t.playing||r&&r===t.display)&&this.show()}},{key:"componentWillUnmount",value:function(){this.leftControlPanelRef.current&&this.leftControlPanelRef.current.removeEventListener(this.wheelEvent,this.handleMouseWheel,{passive:!1})}},{key:"cancelAutoHide",value:function(){this.autoHideTimeoutId&&(clearTimeout(this.autoHideTimeoutId),this.autoHideTimeoutId=null)}},{key:"hide",value:function(){this.state.display&&this.setState({display:!1})}},{key:"show",value:function(){var e=this;this.cancelAutoHide(),this.setState({display:!0},(function(){e.autoHideTimeoutId=setTimeout(e.hide,e.autoHideTimeout)}))}},{key:"handleMouseWheel",value:function(e){var t=this.props,n=t.volume,o=t.onVolumeChange,r=function(e){var t=-e.deltaY||e.wheelDeltaY||-e.detail,n=Math.max(-1,Math.min(1,t));return n>0?Xr:n<0?zr:null}(e);switch(e.preventDefault(),e.stopPropagation(),r){case Xr:n<100&&o(n+1);break;case zr:n>0&&o(n-1)}}},{key:"handleMouseMove",value:function(e){e.preventDefault(),e.stopPropagation(),this.show()}},{key:"render",value:function(){var e=this.props,t=this.state,n=e.filmName,o=e.viewMode,a=e.getText,i=e.onPauseClick,l=e.volume,u=e.isMuted,s=e.playState,c=t.playing,p=t.display,f=t.error,d=Boolean(!c||p),y=this.volumeIconsList.map((function(e,t){return r.a.createElement(Pn,{key:"vp-volume-icon_".concat(t),className:je()("vp-player-toolbar__control-panel-button-icon",{"vp-hidden":Math.ceil(.03*l)!==t}),src:vn("./player/".concat(e))})}));return r.a.createElement("div",{onMouseMove:this.handleMouseMove,onTouchMove:this.handleMouseMove,onMouseLeave:this.hide,className:je()("vp-player-toolbar vp-overlay",{"vp-player-toolbar_darkened":!c},{"vp-transparent":c&&!p})},r.a.createElement("h2",{className:"vp-player-toolbar__top-bar-title"},n),r.a.createElement("div",{className:"vp-player-toolbar__middle-bar"},r.a.createElement("button",{type:"button",onClick:i,className:je()("vp-player-toolbar___control-panel-circle",{"vp-hidden":f||c})},r.a.createElement("img",{className:"vp-player-toolbar___control-panel-triangle",alt:a("play"),src:vn("./player/play-filled.svg")})),r.a.createElement($r,{className:je()({"vp-hidden":!f}),onClose:e.onErrorAcknowledge})),r.a.createElement("div",{className:je()("vp-player-toolbar__control-panel",{"vp-hidden":!d})},r.a.createElement("div",{ref:this.leftControlPanelRef,className:"vp-player-toolbar__control-panel-left-container"},r.a.createElement(ua,{tooltipClassName:"vp-player-toolbar__control-panel-tooltip",tooltipPosition:"top",tooltipLabel:a(u?"unmute":"mute"),onHandleClick:e.onToggleMute},y),r.a.createElement(oi,{className:"vp-channel-toolbar__button",volume:l,changerVisible:null,tooltipPosition:"top",onChange:e.onVolumeChange})),r.a.createElement(Xa,{frameRef:e.frameRef,duration:e.getTotalTime(),errorDisplayed:e.errorDisplayed,availableProgress:t.availableProgress,playState:s,getPlayPosition:e.getPlayPosition,handlePlayPositionChange:e.setPlayPosition}),r.a.createElement("div",{className:"vp-player-toolbar__control-panel-right-container"},r.a.createElement(ua,{tooltipClassName:"vp-player-toolbar__control-panel-tooltip",tooltipPosition:"top",tooltipLabel:a(c?"pause":"play"),onHandleClick:i},r.a.createElement(Pn,{className:je()("vp-player-toolbar__control-panel-button-icon",{"vp-hidden":c}),alt:a("play"),src:vn("./player/play.svg")}),r.a.createElement(Pn,{className:je()("vp-player-toolbar__control-panel-button-icon",{"vp-hidden":!c}),alt:a("pause"),src:vn("./player/pause.svg")})),r.a.createElement(Sa,{getText:a,frameRef:e.frameRef,availableAudio:e.availableAudio,availableSubtitles:e.availableSubtitles,activeAudio:e.activeAudio,activeSubtitles:e.activeSubtitles,onSubtitlesChange:e.onSubtitlesChange,onAudioChange:e.onAudioChange,playState:s}),r.a.createElement(ua,{tooltipClassName:"vp-player-toolbar__control-panel-tooltip",tooltipPosition:"top",tooltipLabel:a(Jn(o)?"exitFullscreen":"fullscreen"),onHandleClick:e.onFullScreenChange},r.a.createElement(Pn,{className:je()("vp-player-toolbar__control-panel-button-icon",{"vp-hidden":Jn(o)}),alt:a("fullscreen"),src:vn("./player/enter-fullscreen.svg")}),r.a.createElement(Pn,{className:je()("vp-player-toolbar__control-panel-button-icon",{"vp-hidden":!Jn(o)}),alt:a("exitFullscreen"),src:vn("./player/exit-fullscreen.svg")})))))}}])&&ai(n.prototype,a),i&&ai(n,i),u}(o.PureComponent);pi.prototype.wheelEvent="onwheel"in document.createElement("div")?"wheel":document.onmousewheel?"mousewheel":"DOMMouseScroll",pi.prototype.volumeIconsList=["volume0.svg","volume1.svg","volume2.svg","volume3.svg"],pi.propTypes={getText:Le.func.isRequired,onAudioChange:Le.func.isRequired,onSubtitlesChange:Le.func.isRequired,activeAudio:Le.object,activeSubtitles:Le.object,availableAudio:Le.object,availableSubtitles:Le.object,error:Le.bool,errorDisplayed:Le.bool,filmName:Le.string,frameRef:Le.object,getPlayPosition:Le.func,getTotalTime:Le.func,isMuted:Le.bool,paused:Le.bool,playing:Le.bool,playState:Le.number,setPlayPosition:Le.func,viewMode:Le.number,volume:Le.number,onErrorAcknowledge:Le.func,onFullScreenChange:Le.func,onPauseClick:Le.func,onToggleMute:Le.func,onVolumeChange:Le.func};var fi=pi;function di(e){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yi(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function hi(e,t){return(hi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vi(e,t){return!t||"object"!==di(t)&&"function"!=typeof t?bi(e):t}function bi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function gi(e){return(gi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hi(e,t)}(u,e);var t,n,a,i,l=(t=u,function(){var e,n=gi(t);if(mi()){var o=gi(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return vi(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).state={playStarted:!1,error:!1},t._bindPlaybackMethods(),t.handleErrorAcknowledge=t.handleErrorAcknowledge.bind(bi(t)),t.handlePauseClick=t.handlePauseClick.bind(bi(t)),t.handleMuteToggle=t.handleMuteToggle.bind(bi(t)),t.handleVolumeChange=t.handleVolumeChange.bind(bi(t)),t.handlePlayError=t.handlePlayError.bind(bi(t)),t.handlePlayStateChange=t.handlePlayStateChange.bind(bi(t)),t.handleAdditionalData=t.handleAdditionalData.bind(bi(t)),t.handleFullScreen=t.handleFullScreen.bind(bi(t)),t.handleKeyPress=t.handleKeyPress.bind(bi(t)),t.frameRef=Object(o.createRef)(),t}return n=u,(a=[{key:"componentDidMount",value:function(){this.props.cleanAdditionalData(),document.addEventListener("keydown",this.handleKeyPress,!1)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.playState,o=t.availableAudio,r=t.activeAudio,a=t.bookingData,i=t.setBookingOverdue,l=Boolean(o&&o.audioList),u=e.playState!==n;!u||n!==Ln.end&&n!==Ln.stop||(this.handleStop(),this.props.changePlayState(Ln.stop)),u&&a&&jn(a)&&(et(),i()),!r&&l&&this.props.handleAudioChange(o.audioList[0])}},{key:"componentWillUnmount",value:function(){this.handleStop(),this.props.changePlayState(Ln.stop),Jo.componentWillUnmount.call(this),document.removeEventListener("keydown",this.handleKeyPress,!1)}},{key:"handleKeyPress",value:function(e){e.keyCode===zo.SPACE?this.handlePauseClick(e):e.keyCode===zo.F&&this.handleFullScreen(e)}},{key:"handleFullScreen",value:function(e){var t=this.props,n=t.changeViewMode,o=t.viewMode;e.preventDefault(),e.stopPropagation(),n(Xn[Jn(o)?"usual":"full"])}},{key:"handleStop",value:function(){var e=this._playback;e&&!e.isStop()&&(e.stop(),this.props.cleanAdditionalData(),this.setState({playStarted:!1}))}},{key:"handleErrorAcknowledge",value:function(){var e=this.props,t=e.changeViewMode;if(Jn(e.viewMode)&&t(Xn.usual),navigator.onLine){var n=this._playback;n&&n.stop(),this.setState({error:!1})}else this.setState({error:!1,playStarted:!1}),this.props.cleanAdditionalData(),this.props.changePlayState(Ln.stop)}},{key:"handlePlayError",value:function(){this.setState({error:!0})}},{key:"handlePlayStateChange",value:function(e){var t=this.props,n=e.data;n&&t.changePlayState(n)}},{key:"handleAdditionalData",value:function(e){var t=this.props,n=e.data;n&&(n.audioList||n.subtitleList)&&t.saveAdditionalData(n)}},{key:"_doSetPlayback",value:function(e){e&&(this.addPlayErrorHandler(this.handlePlayError),this.addPlayStateChangeHandler(this.handlePlayStateChange),this.addSubtitleDataHandler(this.handleAdditionalData),this.addAudioDataHandler(this.handleAdditionalData))}},{key:"handlePauseClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this._playback;t&&(t.isStop()?navigator.onLine?(t.play(),this.setState({playStarted:!0})):this.handlePlayError():t.isPause()?t.play():t.pause())}},{key:"handleMuteToggle",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.isMuted?this.props.onUnmute():this.props.onMute()}},{key:"handleVolumeChange",value:function(e){this.props.onVolumeSet(e)}},{key:"render",value:function(){var e=this.props,t=this.state.playStarted,n=e.videoData,o=e.viewMode,a=e.changeViewMode,i=e.activeSubtitles,l=e.activeAudio,u=e.playState,s=e.paused,c=e.volume,p=e.playing,f=n.filmName,d=n.srcAssetFile,y=Xe.textBy(Wo,e);return r.a.createElement("div",{ref:this.frameRef,className:je()("vp-video-frame",{"vp-video-frame_full":Jn(o)},{"vp-video-frame_wide":Qn(o)})},r.a.createElement(Yr,{video:t?d:null,viewMode:o,videoType:Xo,setPlayback:this._setPlayback,subtitleLang:t&&i?i.lang:"",subtitleName:t&&i?i.name:"",audioLang:t&&l?l.lang:"",audioName:t&&l?l.name:"",volume:c},r.a.createElement(fi,{getText:y,getPlayPosition:this.getPlayPosition,getTotalTime:this.getTotalTime,isMuted:this.props.isMuted,error:this.props.error||this.state.error,errorDisplayed:this.state.error,filmName:f,frameRef:this.frameRef,activeSubtitles:i,activeAudio:l,availableAudio:this.props.availableAudio,availableSubtitles:this.props.availableSubtitles,onErrorAcknowledge:this.handleErrorAcknowledge,onViewModeChange:a,onFullScreenChange:this.handleFullScreen,onPauseClick:this.handlePauseClick,onToggleMute:this.handleMuteToggle,onVolumeChange:this.handleVolumeChange,onSubtitlesChange:this.props.handleSubtitlesChange,onAudioChange:this.props.handleAudioChange,paused:s,playing:p,playState:u,setPlayPosition:this.setPlayPosition,viewMode:o,volume:c})))}}])&&yi(n.prototype,a),i&&yi(n,i),u}(o.PureComponent);c()(_i.prototype,Qo),_i.propTypes={changePlayState:Le.func.isRequired,changeViewMode:Le.func.isRequired,cleanAdditionalData:Le.func.isRequired,handleAudioChange:Le.func.isRequired,handleSubtitlesChange:Le.func.isRequired,saveAdditionalData:Le.func.isRequired,setBookingOverdue:Le.func.isRequired,videoData:Le.object.isRequired,activeAudio:Le.object,activeSubtitles:Le.object,availableAudio:Le.object,availableSubtitles:Le.object,bookingData:Le.object,error:Le.bool,isMuted:Le.bool,paused:Le.bool,playing:Le.bool,playState:Le.number,viewMode:Le.number,volume:Le.number,onMute:Le.func,onUnmute:Le.func,onVolumeSet:Le.func};var Oi=Object(l.b)((function(e){var t=In(e),n=t.viewMode,o=t.playState,r=zn(Fn(e)),a=Hn(e),i=a.availableSubtitles,l=a.availableAudio;return{viewMode:n,playState:o,bookingData:an(e),bookingIsOverdue:rn(e),activeSubtitles:qn(e),availableSubtitles:i,activeAudio:Gn(e),availableAudio:l,error:Vn(e),ended:Un(e),stopped:Bn(e),playing:xn(e),paused:Mn(e),volume:r.volume,isMuted:r.mute}}),(function(e){return{changePlayState:function(t){e(ro(t))},changeViewMode:function(t){e(ao(t))},cleanAdditionalData:function(){e(oo())},saveAdditionalData:function(t){e(lo(t))},handleSubtitlesChange:function(t){e(so(t))},handleAudioChange:function(t){e(uo(t))},setBookingOverdue:function(){e($t())},onMute:function(){e(to())},onUnmute:function(){e(no())},onVolumeSet:function(t){e(io(t))}}}))(Xe.injectIntl(_i)),Pi=n(252),Si=n.n(Pi),Ei={title:"",director:"",description:"",endVal:0,country:"",srcImgFile:null,genres:[],year:0,duration:0,prLevel:-1,mainActorList:[],srcAssetFile:null},ki=function(e){return e.activation.bookingData||Ei},Ri=Object(tn.a)(ki,(function(e){return{srcAssetFile:e.srcAssetFile,filmName:e.name||""}})),Ti=Object(tn.a)(ki,(function(e){return{availableUntil:e.endVal||0,filmName:e.name||"",director:e.director||"",description:e.description||"",country:e.country||"",srcImgFile:e.srcImgFile,genres:e.genres||[],year:e.year||0,prLevel:e.prLevel||-1,mainActorList:e.mainActorList||[],duration:Si()(e.duration,"s","m")||0}}));n(588);function Ni(e){return(Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wi(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Di(e,t){return(Di=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ci(e,t){return!t||"object"!==Ni(t)&&"function"!=typeof t?Ai(e):t}function Ai(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ji(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Li(e){return(Li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ii=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Di(e,t)}(u,e);var t,n,a,i,l=(t=u,function(){var e,n=Li(t);if(ji()){var o=Li(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return Ci(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).handleNewCodeButtonPress=t.handleNewCodeButtonPress.bind(Ai(t)),t}return n=u,(a=[{key:"componentDidMount",value:function(){nt(this.props.bookingData)}},{key:"handleNewCodeButtonPress",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.changePlayState(Ln.stop),this.props.onNewCodeButtonPress()}},{key:"render",value:function(){var e=this.props,t=e.videoData,n=(e.videoDescription,Xe.textBy(yo,this.props));return r.a.createElement(o.Fragment,null,r.a.createElement(En,null,r.a.createElement("button",{type:"button",className:"vp-header__new-code-button",onClick:this.handleNewCodeButtonPress},n("newCode"))),r.a.createElement("div",{className:"vp-video__frame-container"},r.a.createElement(Oi,{videoData:t})),r.a.createElement(Ko,null))}}])&&wi(n.prototype,a),i&&wi(n,i),u}(o.PureComponent);Ii.propTypes={bookingData:Le.object.isRequired,changePlayState:Le.func.isRequired,videoData:Le.object.isRequired,videoDescription:Le.object.isRequired,onNewCodeButtonPress:Le.func.isRequired};var Mi=Object(l.b)((function(e){return{bookingData:ki(e),videoData:Ri(e),videoDescription:Ti(e)}}),(function(e){return{onNewCodeButtonPress:function(){e(gt()),et()},changePlayState:function(t){e(ro(t))}}}))(Xe.injectIntl(Ii)),xi=n(590),Ui=it({en:{error:"Unfortunately an error is happened in the application.<brk></brk><link>Try to reload the application.</link>"},ru:{error:"К сожалению, в приложении произошла ошибка.<brk></brk><link>Попробуйте перезапустить приложение.</link>"}});function Vi(e){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bi(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Fi(e,t,n){return t&&Bi(e.prototype,t),n&&Bi(e,n),e}function qi(e,t){return(qi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gi(e,t){return!t||"object"!==Vi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ki(e){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wi=pe("ui/app/ErrorBoundary");function Yi(e){e.preventDefault(),e.stopPropagation(),et(),location.reload()}var Xi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qi(e,t)}(o,e);var t,n=(t=o,function(){var e,n=Ki(t);if(Hi()){var o=Ki(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return Gi(this,e)});function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=n.call(this,e)).state={error:null},t}return Fi(o,null,[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),Fi(o,[{key:"componentDidCatch",value:function(e,t){var n=location,o=this.props,r=o.location;Wi.error("App UI error: ".concat(e,"\n").concat(e.stack||"","\nLocation path - ").concat(r?r.pathname:"",", location - ").concat(n.pathname).concat(n.search).concat(n.hash,"\nLocale - ").concat(o.intl.locale,"\nComponent stack:\n").concat(t.componentStack))}},{key:"render",value:function(){return this.state.error?r.a.createElement(Xe,{localePack:Ui},r.a.createElement("div",{className:"vp-main-area vp-main-area_error"},r.a.createElement(xi.a,{id:"error",values:{brk:function(){return r.a.createElement("br",null)},link:function(e){return r.a.createElement("a",{href:"#",onClick:Yi},e)}}}))):this.props.children}}]),o}(o.Component);function zi(e){return(zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ji(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Qi(e,t){return(Qi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $i(e,t){return!t||"object"!==zi(t)&&"function"!=typeof t?Zi(e):t}function Zi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function el(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function tl(e){return(tl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Xi.propTypes={intl:Le.object.isRequired,location:Le.object};var nl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qi(e,t)}(l,e);var t,n,o,a,i=(t=l,function(){var e,n=tl(t);if(el()){var o=tl(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return $i(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).handleFullscreenChange=t.handleFullscreenChange.bind(Zi(t)),t}return n=l,(o=[{key:"componentDidMount",value:function(){var e=this.props,t=e.bookingData,n=e.isWait,o=e.setBookingOverdue;t&&jn(t)&&(et(),o()),n||this.hideWaitScreen()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.bookingIsOverdue,o=t.resetVerificationState,r=t.isWait;!e.bookingIsOverdue&&n&&o(),r!==e.isWait&&(r?this.showWaitScreen():this.hideWaitScreen())}},{key:"handleFullscreenChange",value:function(e){var t=this.props,n=Jn(t.viewMode);n&&!e?t.changeViewMode():!n&&e&&t.changeViewMode(Xn.full)}},{key:"hideWaitScreen",value:function(){var e=document.querySelector(".vp-wait-screen");e&&!e.classList.contains("vp-wait-screen_hidden")&&e.classList.add("vp-wait-screen_hidden")}},{key:"showWaitScreen",value:function(){var e=document.querySelector(".vp-wait-screen");e&&e.classList.contains("vp-wait-screen_hidden")&&e.classList.remove("vp-wait-screen_hidden")}},{key:"render",value:function(){var e=this.props,t=e.bookingData,n=t?"".concat(po.video,"/").concat(t.id):po.home,o=r.a.createElement("div",{className:je()("vp-main-area",{"vp-main-area-fullscreen":Jn(e.viewMode)})},r.a.createElement(Xi,{intl:e.intl,location:e.location},r.a.createElement(Me.d,null,!t&&r.a.createElement(Me.b,{exact:!0,path:fo.home,component:kn}),t&&r.a.createElement(Me.b,{path:"".concat(po.video,"/").concat(t.id),component:Mi}),r.a.createElement(Vt,{to:n}))));return jt.isEnabled()&&(o=r.a.createElement(jt,{active:Jn(e.viewMode),onChange:this.handleFullscreenChange},o)),o}}])&&Ji(n.prototype,o),a&&Ji(n,a),l}(o.PureComponent);nl.propTypes={bookingIsOverdue:Le.bool.isRequired,changeViewMode:Le.func.isRequired,intl:Le.object.isRequired,location:Le.object.isRequired,resetVerificationState:Le.func.isRequired,setBookingOverdue:Le.func.isRequired,bookingData:Le.object,isWait:Le.bool,viewMode:Le.number},nl.defaultProps={isWait:!1};var ol=Object(Me.g)(Object(l.b)((function(e){var t=In(e).viewMode;return{bookingData:an(e),bookingIsOverdue:rn(e),viewMode:t}}),(function(e){return{changeViewMode:function(t){e(ao(t))},resetVerificationState:function(){e(gt())},setBookingOverdue:function(){e($t())}}}))(Xe.injectIntl(nl))),rl=n(34),al=Object(rl.c)({app:en,activation:_t,player:co});function il(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ll(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?il(Object(n),!0).forEach((function(t){ul(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):il(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ul(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sl,cl,pl,fl,dl,yl,hl,vl,bl,ml=Object(at.a)({reducer:al,preloadedState:{activation:ll({},ft,{booking:Ze.get(we)||null,bookingData:Ze.get(Ne)||null})}}),gl=pe("main"),_l=p.localeList,Ol=p.debug,Pl=Ol.log,Sl=Pl.general,El={},kl=p.version,Rl=document.getElementById("root"),Tl="ru",Nl=location.search;for(cl in Nl&&("0"===(sl=(Nl=Object(S.parseString)(Nl.substring(1))).debug)&&(sl=!1),(fl=sl?"debug":Nl.log)&&fl in y?Sl.level=fl:fl=null,sl&&(Pl.middleware.bufferSize=1),(sl=Nl.playerLog)&&(Ol.playerLog="1"===sl||"0"!==sl&&sl),(pl=Nl.locale)&&_l.indexOf(pl)>-1&&(p.locale=pl,Tl=null)),dl=(yl="karo")?Ce(yl):De,dl,Pl)"general"!==cl&&(El[cl]=Object.assign({},Sl,Pl[cl]));if(ye(El),fl&&he(y[fl]),gl.log("Application start. Version: ".concat(kl.value,". Revision: ").concat(kl.revision,". Build time: ").concat(new Date(kl.buildTime))),Tl)for(;Tl&&-1===_l.indexOf(Tl);)Tl=Tl.substring(0,Tl.lastIndexOf("-"));Tl?p.locale=pl=Tl:pl=p.locale,-1===_l.indexOf(pl)&&(p.locale=pl="en"),gl.log("locale - ".concat(pl,", skin - ").concat(p.skin)),Promise.all((bl=[],p.bsAnalytics.use&&bl.push((new Se).setAction(ke).sendRequest(hl,vl).promise.then((function(e){e.result&&e.result.serverUrl?p.bsAnalytics.middlewareId=e.result.middlewareId||location.hostname:p.bsAnalytics.use=!1,Ee.log("Successful getting BS Analytics properties.")})).catch((function(e){Ee.error("An error occurred while loading BS Analytics properties:",e)}))),bl)).then((function(){var e;e=ol,Object(a.render)(r.a.createElement(l.a,{store:ml},r.a.createElement(u.a,null,r.a.createElement(i.b,{locale:pl,messages:{}},r.a.createElement(e,null)))),Rl)})).catch((function(e){gl.error("An error occurred on starting app:",e)}))}});